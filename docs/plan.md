# План реализации GophKeeper

## Этап 1: Базовый клиент (локальная работа с KDBX)

- [x] Настройка структуры проекта, подключение зависимостей (`gokeepasslib`, `Bubble Tea`, `gofrs/flock`)
- [x] Реализация базового TUI-интерфейса (навигация, ввод пароля)
- [x] Открытие и чтение существующего KDBX-файла (ввод мастер-пароля)
- [x] Отображение списка записей
- [x] Отображение деталей отдельной записи (логин, пароль, поля)
- [x] Реализация поиска по записям (встроенная фильтрация `bubbles/list`)
- [x] Реализация редактирования существующих записей (в памяти)
- [x] Реализация добавления новых записей
- [x] Реализация сохранения изменений в KDBX файл (по команде Ctrl+S)
- [x] Реализация поддержки бинарных данных (вложения KDBX)
- [x] Реализация поддержки данных банковских карт (структура полей)
- [x] Реализация создания нового KDBX-файла
- [x] Сделать путь к KDBX файлу конфигурируемым (CLI флаг или TUI)
- [x] Реализация локальной блокировки файла (`flock`)
- [x] Написание unit-тестов для работы с KDBX (базовые функции)

## Этап 2: Серверная часть (хранение и API)

- [x] Настройка структуры серверного проекта
- [x] Настройка Docker Compose (PostgreSQL, MinIO)
- [x] Реализация схемы БД PostgreSQL (пользователи, метаданные KDBX)
- [x] Реализация регистрации (`/register`) и аутентификации (`/login`) с JWT
- [x] Реализация API для получения метаданных (`/vault`)
- [x] Реализация загрузки (`/vault/upload`) и скачивания (`/vault/download`) KDBX
- [x] Интеграция с MinIO для хранения файлов
- [x] Реализация версионирования файлов на сервере
- [x] Реализация API для получения списка версий (`/vault/versions`)
- [x] Реализация API для отката к версии (`/vault/rollback`)
- [x] Написание unit-тестов для API и логики сервера (vault handlers)

## Этап 3: Интеграция клиента и сервера (синхронизация)

- [x] Реализация сетевого слоя в клиенте (API-клиент)
- [x] Реализация процесса регистрации и входа на клиенте
- [x] Сохранение/загрузка токена и URL сервера в/из KDBX
- [x] Реализация логики синхронизации (сравнение метаданных, загрузка/скачивание)
- [x] Реализация базового механизма разрешения конфликтов на клиенте (Last Write Wins)
- [x] Реализация отображения истории версий и отката на клиенте
- [x] Доработка TUI (улучшение UX/UI)

## Этап 4: Завершение и документация

- [x] Обеспечить использование HTTPS для всех API-взаимодействий
- [x] Клиент должен давать пользователю возможность получить информацию о версии и дате сборки бинарного файла клиента (флаг --version у клиента).
- [x] Финализация документации
- [ ] Сборка релизных версий клиента для разных ОС
- [ ] Общее покрытие тестами не менее 80%.
