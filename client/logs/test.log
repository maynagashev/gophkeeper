?   	github.com/maynagashev/gophkeeper/client/cmd/gophkeeper	[no test files]
=== RUN   TestHTTPClient_UploadVault
=== RUN   TestHTTPClient_UploadVault/Успех
=== RUN   TestHTTPClient_UploadVault/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_UploadVault/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_UploadVault/Без_токена_авторизации
--- PASS: TestHTTPClient_UploadVault (0.01s)
    --- PASS: TestHTTPClient_UploadVault/Успех (0.00s)
    --- PASS: TestHTTPClient_UploadVault/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_UploadVault/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_UploadVault/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_GetVaultMetadata
=== RUN   TestHTTPClient_GetVaultMetadata/Успех
=== RUN   TestHTTPClient_GetVaultMetadata/Хранилище_не_найдено_(404)
=== RUN   TestHTTPClient_GetVaultMetadata/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_GetVaultMetadata/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_GetVaultMetadata/Невалидный_JSON_ответ
=== RUN   TestHTTPClient_GetVaultMetadata/Без_токена_авторизации
--- PASS: TestHTTPClient_GetVaultMetadata (0.01s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Успех (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Хранилище_не_найдено_(404) (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Невалидный_JSON_ответ (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_Register
=== RUN   TestHTTPClient_Register/Успешная_регистрация
=== RUN   TestHTTPClient_Register/Ошибка_при_занятом_имени_пользователя_(409)
=== RUN   TestHTTPClient_Register/Ошибка_сервера_(500)
--- PASS: TestHTTPClient_Register (0.00s)
    --- PASS: TestHTTPClient_Register/Успешная_регистрация (0.00s)
    --- PASS: TestHTTPClient_Register/Ошибка_при_занятом_имени_пользователя_(409) (0.00s)
    --- PASS: TestHTTPClient_Register/Ошибка_сервера_(500) (0.00s)
=== RUN   TestHTTPClient_Login
=== RUN   TestHTTPClient_Login/Успешный_вход
=== RUN   TestHTTPClient_Login/Неверные_учетные_данные_(401)
=== RUN   TestHTTPClient_Login/Пользователь_не_найден_(404)
=== RUN   TestHTTPClient_Login/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_Login/Невалидный_JSON_ответ
--- PASS: TestHTTPClient_Login (0.01s)
    --- PASS: TestHTTPClient_Login/Успешный_вход (0.00s)
    --- PASS: TestHTTPClient_Login/Неверные_учетные_данные_(401) (0.00s)
    --- PASS: TestHTTPClient_Login/Пользователь_не_найден_(404) (0.00s)
    --- PASS: TestHTTPClient_Login/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_Login/Невалидный_JSON_ответ (0.00s)
=== RUN   TestHTTPClient_DownloadVault
=== RUN   TestHTTPClient_DownloadVault/Успешное_скачивание
=== RUN   TestHTTPClient_DownloadVault/Хранилище_не_найдено_(404)
=== RUN   TestHTTPClient_DownloadVault/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_DownloadVault/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_DownloadVault/Без_токена_авторизации
--- PASS: TestHTTPClient_DownloadVault (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Успешное_скачивание (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Хранилище_не_найдено_(404) (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_ListVersions
=== RUN   TestHTTPClient_ListVersions/Успешное_получение_списка_версий
=== RUN   TestHTTPClient_ListVersions/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_ListVersions/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_ListVersions/Невалидный_JSON_ответ
=== RUN   TestHTTPClient_ListVersions/Без_токена_авторизации
--- PASS: TestHTTPClient_ListVersions (0.01s)
    --- PASS: TestHTTPClient_ListVersions/Успешное_получение_списка_версий (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Невалидный_JSON_ответ (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_RollbackToVersion
=== RUN   TestHTTPClient_RollbackToVersion/Успешный_откат
=== RUN   TestHTTPClient_RollbackToVersion/Версия_не_найдена_(404)
=== RUN   TestHTTPClient_RollbackToVersion/Неверный_запрос_(400)
=== RUN   TestHTTPClient_RollbackToVersion/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_RollbackToVersion/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_RollbackToVersion/Без_токена_авторизации
--- PASS: TestHTTPClient_RollbackToVersion (0.01s)
    --- PASS: TestHTTPClient_RollbackToVersion/Успешный_откат (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Версия_не_найдена_(404) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Неверный_запрос_(400) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Без_токена_авторизации (0.00s)
PASS
ok  	github.com/maynagashev/gophkeeper/client/internal/api	(cached)
=== RUN   TestSaveAuthData
=== RUN   TestSaveAuthData/Success_Save_Auth_Data
=== RUN   TestSaveAuthData/Success_Update_Auth_Data
=== RUN   TestSaveAuthData/Success_Remove_Auth_Data
=== RUN   TestSaveAuthData/Error_With_Nil_Database
=== RUN   TestSaveAuthData/Error_With_Nil_Content
=== RUN   TestSaveAuthData/Error_With_Nil_Meta
--- PASS: TestSaveAuthData (0.01s)
    --- PASS: TestSaveAuthData/Success_Save_Auth_Data (0.00s)
    --- PASS: TestSaveAuthData/Success_Update_Auth_Data (0.01s)
    --- PASS: TestSaveAuthData/Success_Remove_Auth_Data (0.00s)
    --- PASS: TestSaveAuthData/Error_With_Nil_Database (0.00s)
    --- PASS: TestSaveAuthData/Error_With_Nil_Content (0.00s)
    --- PASS: TestSaveAuthData/Error_With_Nil_Meta (0.00s)
=== RUN   TestLoadAuthData
=== RUN   TestLoadAuthData/Success_Load_Auth_Data
=== RUN   TestLoadAuthData/Success_Load_Empty_Auth_Data
=== RUN   TestLoadAuthData/Error_With_Nil_Database
=== RUN   TestLoadAuthData/Error_With_Nil_Content
=== RUN   TestLoadAuthData/Error_With_Nil_Meta
--- PASS: TestLoadAuthData (0.00s)
    --- PASS: TestLoadAuthData/Success_Load_Auth_Data (0.00s)
    --- PASS: TestLoadAuthData/Success_Load_Empty_Auth_Data (0.00s)
    --- PASS: TestLoadAuthData/Error_With_Nil_Database (0.00s)
    --- PASS: TestLoadAuthData/Error_With_Nil_Content (0.00s)
    --- PASS: TestLoadAuthData/Error_With_Nil_Meta (0.00s)
=== RUN   TestSaveFile
=== RUN   TestSaveFile/Success_Save_New_File
=== RUN   TestSaveFile/Error_Save_Nil_Database
=== RUN   TestSaveFile/Error_Save_With_Empty_Password
=== RUN   TestSaveFile/Success_Save_In_Nonexistent_Directory
=== RUN   TestSaveFile/Success_Overwrite_Existing_File
--- PASS: TestSaveFile (0.01s)
    --- PASS: TestSaveFile/Success_Save_New_File (0.00s)
    --- PASS: TestSaveFile/Error_Save_Nil_Database (0.00s)
    --- PASS: TestSaveFile/Error_Save_With_Empty_Password (0.00s)
    --- PASS: TestSaveFile/Success_Save_In_Nonexistent_Directory (0.00s)
    --- PASS: TestSaveFile/Success_Overwrite_Existing_File (0.01s)
=== RUN   TestOpenFile
=== RUN   TestOpenFile/Success_With_Correct_Password
=== RUN   TestOpenFile/Error_With_Incorrect_Password
=== RUN   TestOpenFile/Error_With_Nonexistent_File
--- PASS: TestOpenFile (1.13s)
    --- PASS: TestOpenFile/Success_With_Correct_Password (0.53s)
    --- PASS: TestOpenFile/Error_With_Incorrect_Password (0.60s)
    --- PASS: TestOpenFile/Error_With_Nonexistent_File (0.00s)
=== RUN   TestGetAllEntries
=== RUN   TestGetAllEntries/Success_Get_Entries
=== RUN   TestGetAllEntries/Handle_Nil_Database
--- PASS: TestGetAllEntries (0.55s)
    --- PASS: TestGetAllEntries/Success_Get_Entries (0.55s)
    --- PASS: TestGetAllEntries/Handle_Nil_Database (0.00s)
=== RUN   TestCreateDatabase
=== RUN   TestCreateDatabase/Create_New_Database
--- PASS: TestCreateDatabase (0.00s)
    --- PASS: TestCreateDatabase/Create_New_Database (0.00s)
=== RUN   TestSaveFileFunction
=== RUN   TestSaveFileFunction/Успешное_сохранение_файла
=== RUN   TestSaveFileFunction/Ошибка_при_nil_базе_данных
=== RUN   TestSaveFileFunction/Ошибка_при_пустом_пароле
=== RUN   TestSaveFileFunction/Ошибка_записи_в_недоступный_каталог
--- PASS: TestSaveFileFunction (0.00s)
    --- PASS: TestSaveFileFunction/Успешное_сохранение_файла (0.00s)
    --- PASS: TestSaveFileFunction/Ошибка_при_nil_базе_данных (0.00s)
    --- PASS: TestSaveFileFunction/Ошибка_при_пустом_пароле (0.00s)
    --- PASS: TestSaveFileFunction/Ошибка_записи_в_недоступный_каталог (0.00s)
PASS
ok  	github.com/maynagashev/gophkeeper/client/internal/kdbx	(cached)
=== RUN   TestHandleAPIMessages
=== RUN   TestHandleAPIMessages/УспешныйВход
2025/04/27 12:00:26 INFO Auth данные успешно обновлены в KDBX (в памяти)
=== RUN   TestHandleAPIMessages/ОшибкаВхода
=== RUN   TestHandleAPIMessages/УспешнаяРегистрация
=== RUN   TestHandleAPIMessages/ОшибкаРегистрации
=== RUN   TestHandleAPIMessages/НеобрабатываемоеСообщение
--- PASS: TestHandleAPIMessages (0.00s)
    --- PASS: TestHandleAPIMessages/УспешныйВход (0.00s)
    --- PASS: TestHandleAPIMessages/ОшибкаВхода (0.00s)
    --- PASS: TestHandleAPIMessages/УспешнаяРегистрация (0.00s)
    --- PASS: TestHandleAPIMessages/ОшибкаРегистрации (0.00s)
    --- PASS: TestHandleAPIMessages/НеобрабатываемоеСообщение (0.00s)
=== RUN   TestOpenKdbxCmd
=== RUN   TestOpenKdbxCmd/SuccessfulOpen
=== RUN   TestOpenKdbxCmd/FileNotFound
=== RUN   TestOpenKdbxCmd/WrongPassword
--- PASS: TestOpenKdbxCmd (0.00s)
    --- PASS: TestOpenKdbxCmd/SuccessfulOpen (0.00s)
    --- PASS: TestOpenKdbxCmd/FileNotFound (0.00s)
    --- PASS: TestOpenKdbxCmd/WrongPassword (0.00s)
=== RUN   TestSaveKdbxCmd
=== RUN   TestSaveKdbxCmd/SuccessfulSave
=== RUN   TestSaveKdbxCmd/NilDatabase
=== RUN   TestSaveKdbxCmd/EmptyPath
=== RUN   TestSaveKdbxCmd/InaccessibleDirectory
--- PASS: TestSaveKdbxCmd (0.00s)
    --- PASS: TestSaveKdbxCmd/SuccessfulSave (0.00s)
    --- PASS: TestSaveKdbxCmd/NilDatabase (0.00s)
    --- PASS: TestSaveKdbxCmd/EmptyPath (0.00s)
    --- PASS: TestSaveKdbxCmd/InaccessibleDirectory (0.00s)
=== RUN   TestClearStatusCmd
--- PASS: TestClearStatusCmd (0.02s)
=== RUN   TestMakeLoginCmd
=== RUN   TestMakeLoginCmd/SuccessfulLogin
=== RUN   TestMakeLoginCmd/LoginError
--- PASS: TestMakeLoginCmd (0.00s)
    --- PASS: TestMakeLoginCmd/SuccessfulLogin (0.00s)
    --- PASS: TestMakeLoginCmd/LoginError (0.00s)
=== RUN   TestMakeRegisterCmd
=== RUN   TestMakeRegisterCmd/SuccessfulRegistration
=== RUN   TestMakeRegisterCmd/RegistrationError
--- PASS: TestMakeRegisterCmd (0.00s)
    --- PASS: TestMakeRegisterCmd/SuccessfulRegistration (0.00s)
    --- PASS: TestMakeRegisterCmd/RegistrationError (0.00s)
=== RUN   TestStartSyncCmd
=== RUN   TestStartSyncCmd/AllPreconditionsOK
2025/04/27 12:00:26 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 12:00:26 INFO Предусловия синхронизации выполнены.
=== RUN   TestStartSyncCmd/NoServerURL
2025/04/27 12:00:26 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 12:00:26 WARN Предусловие синхронизации не выполнено error="URL сервера не настроен"
=== RUN   TestStartSyncCmd/NoAuthToken
2025/04/27 12:00:26 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 12:00:26 WARN Предусловие синхронизации не выполнено error="необходимо войти на сервер"
=== RUN   TestStartSyncCmd/NoAPIClient
2025/04/27 12:00:26 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 12:00:26 ERROR Критическая ошибка: API клиент nil перед синхронизацией
=== RUN   TestStartSyncCmd/NoDatabase
2025/04/27 12:00:26 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 12:00:26 ERROR Критическая ошибка: База данных nil перед синхронизацией
--- PASS: TestStartSyncCmd (0.00s)
    --- PASS: TestStartSyncCmd/AllPreconditionsOK (0.00s)
    --- PASS: TestStartSyncCmd/NoServerURL (0.00s)
    --- PASS: TestStartSyncCmd/NoAuthToken (0.00s)
    --- PASS: TestStartSyncCmd/NoAPIClient (0.00s)
    --- PASS: TestStartSyncCmd/NoDatabase (0.00s)
=== RUN   TestFetchServerMetadataCmd
=== RUN   TestFetchServerMetadataCmd/SuccessfulMetadataFetch
=== RUN   TestFetchServerMetadataCmd/ErrorFetchingMetadata
2025/04/27 12:00:26 ERROR Ошибка получения метаданных с сервера error="ошибка получения метаданных"
--- PASS: TestFetchServerMetadataCmd (0.00s)
    --- PASS: TestFetchServerMetadataCmd/SuccessfulMetadataFetch (0.00s)
    --- PASS: TestFetchServerMetadataCmd/ErrorFetchingMetadata (0.00s)
=== RUN   TestFetchLocalMetadataCmd
=== RUN   TestFetchLocalMetadataCmd/SuccessfulLocalMetadataFetch
=== RUN   TestFetchLocalMetadataCmd/FileNotFound
2025/04/27 12:00:26 INFO Локальный файл KDBX не найден.
=== RUN   TestFetchLocalMetadataCmd/NoPathInModel
2025/04/27 12:00:26 INFO Локальный файл KDBX не найден.
--- PASS: TestFetchLocalMetadataCmd (0.00s)
    --- PASS: TestFetchLocalMetadataCmd/SuccessfulLocalMetadataFetch (0.00s)
    --- PASS: TestFetchLocalMetadataCmd/FileNotFound (0.00s)
    --- PASS: TestFetchLocalMetadataCmd/NoPathInModel (0.00s)
=== RUN   TestUploadVaultCmd
=== RUN   TestUploadVaultCmd/SuccessfulUpload
2025/04/27 12:00:26 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 12:00:26 INFO Обновление m.db завершено.
2025/04/27 12:00:26 INFO Запуск загрузки KDBX на сервер... fileModTime=2025-04-27T12:00:26.502+07:00
2025/04/27 12:00:26 INFO Загрузка KDBX на сервер успешно завершена.
=== RUN   TestUploadVaultCmd/APIError
2025/04/27 12:00:26 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 12:00:26 INFO Обновление m.db завершено.
2025/04/27 12:00:26 INFO Запуск загрузки KDBX на сервер... fileModTime=2025-04-27T12:00:26.502+07:00
2025/04/27 12:00:26 ERROR Ошибка загрузки KDBX на сервер error="ошибка загрузки"
=== RUN   TestUploadVaultCmd/NoDatabaseLoaded
2025/04/27 12:00:26 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 12:00:26 INFO Обновление m.db завершено.
2025/04/27 12:00:26 ERROR Попытка загрузки хранилища, но m.db is nil
=== RUN   TestUploadVaultCmd/FileNotFoundForMetadata
2025/04/27 12:00:26 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 12:00:26 INFO Обновление m.db завершено.
2025/04/27 12:00:26 ERROR Ошибка получения метаданных локального файла перед загрузкой path=/tmp/gophkeeper_test_2553770383/non_existent.kdbx error="stat /tmp/gophkeeper_test_2553770383/non_existent.kdbx: no such file or directory"
--- PASS: TestUploadVaultCmd (0.00s)
    --- PASS: TestUploadVaultCmd/SuccessfulUpload (0.00s)
    --- PASS: TestUploadVaultCmd/APIError (0.00s)
    --- PASS: TestUploadVaultCmd/NoDatabaseLoaded (0.00s)
    --- PASS: TestUploadVaultCmd/FileNotFoundForMetadata (0.00s)
=== RUN   TestDownloadVaultCmd
=== RUN   TestDownloadVaultCmd/SuccessfulDownload
2025/04/27 12:00:26 INFO Запуск скачивания KDBX с сервера...
2025/04/27 12:00:26 INFO Скачивание KDBX с сервера и сохранение локально завершено.
=== RUN   TestDownloadVaultCmd/APIError
2025/04/27 12:00:26 INFO Запуск скачивания KDBX с сервера...
2025/04/27 12:00:26 ERROR Ошибка скачивания KDBX с сервера error="ошибка скачивания"
=== RUN   TestDownloadVaultCmd/WriteError
2025/04/27 12:00:26 INFO Запуск скачивания KDBX с сервера...
2025/04/27 12:00:26 ERROR Ошибка открытия локального файла для записи path=/tmp/gophkeeper_test_3756823950/readonly/test.kdbx error="open /tmp/gophkeeper_test_3756823950/readonly/test.kdbx: permission denied"
--- PASS: TestDownloadVaultCmd (0.00s)
    --- PASS: TestDownloadVaultCmd/SuccessfulDownload (0.00s)
    --- PASS: TestDownloadVaultCmd/APIError (0.00s)
    --- PASS: TestDownloadVaultCmd/WriteError (0.00s)
=== RUN   TestListVersionsCmd
=== RUN   TestListVersionsCmd/УспешнаяЗагрузкаВерсий
2025/04/27 12:00:26 INFO Список версий успешно загружен count=2 current_id=2
=== RUN   TestListVersionsCmd/APIКлиентНеИнициализирован
=== RUN   TestListVersionsCmd/ОтсутствуетТокенАвторизации
=== RUN   TestListVersionsCmd/ОшибкаAPI
2025/04/27 12:00:26 ERROR Ошибка загрузки списка версий error="ошибка сети"
=== RUN   TestListVersionsCmd/ОшибкаАвторизации
2025/04/27 12:00:26 ERROR Ошибка загрузки списка версий: ошибка авторизации
--- PASS: TestListVersionsCmd (0.00s)
    --- PASS: TestListVersionsCmd/УспешнаяЗагрузкаВерсий (0.00s)
    --- PASS: TestListVersionsCmd/APIКлиентНеИнициализирован (0.00s)
    --- PASS: TestListVersionsCmd/ОтсутствуетТокенАвторизации (0.00s)
    --- PASS: TestListVersionsCmd/ОшибкаAPI (0.00s)
    --- PASS: TestListVersionsCmd/ОшибкаАвторизации (0.00s)
=== RUN   TestRollbackToVersionCmd
=== RUN   TestRollbackToVersionCmd/УспешныйОткат
2025/04/27 12:00:26 INFO Успешный откат к версии version_id=10
=== RUN   TestRollbackToVersionCmd/APIКлиентНеИнициализирован
=== RUN   TestRollbackToVersionCmd/ОтсутствуетТокенАвторизации
=== RUN   TestRollbackToVersionCmd/ОшибкаОтката
2025/04/27 12:00:26 ERROR Ошибка отката к версии version_id=10 error="версия не найдена"
--- PASS: TestRollbackToVersionCmd (0.00s)
    --- PASS: TestRollbackToVersionCmd/УспешныйОткат (0.00s)
    --- PASS: TestRollbackToVersionCmd/APIКлиентНеИнициализирован (0.00s)
    --- PASS: TestRollbackToVersionCmd/ОтсутствуетТокенАвторизации (0.00s)
    --- PASS: TestRollbackToVersionCmd/ОшибкаОтката (0.00s)
=== RUN   TestApplyUIChangesToDB
=== RUN   TestApplyUIChangesToDB/УспешноеОбновлениеЗаписей
=== RUN   TestApplyUIChangesToDB/НесуществующийUUID
2025/04/27 12:00:26 WARN Запись из списка не найдена в m.db при подготовке к загрузке uuid="CCmg+jpeDFFzSBTBs1cc2A=="
=== RUN   TestApplyUIChangesToDB/ПустойСписок
--- PASS: TestApplyUIChangesToDB (0.00s)
    --- PASS: TestApplyUIChangesToDB/УспешноеОбновлениеЗаписей (0.00s)
    --- PASS: TestApplyUIChangesToDB/НесуществующийUUID (0.00s)
    --- PASS: TestApplyUIChangesToDB/ПустойСписок (0.00s)
=== RUN   TestVersionItem_Title
=== RUN   TestVersionItem_Title/Обычная_версия
=== RUN   TestVersionItem_Title/Текущая_версия
--- PASS: TestVersionItem_Title (0.00s)
    --- PASS: TestVersionItem_Title/Обычная_версия (0.00s)
    --- PASS: TestVersionItem_Title/Текущая_версия (0.00s)
=== RUN   TestVersionItem_Description
=== RUN   TestVersionItem_Description/Только_ID
=== RUN   TestVersionItem_Description/Только_время_модификации
=== RUN   TestVersionItem_Description/Только_размер
=== RUN   TestVersionItem_Description/Время_и_размер
=== RUN   TestVersionItem_Description/Текущая_версия_со_временем_и_размером
--- PASS: TestVersionItem_Description (0.00s)
    --- PASS: TestVersionItem_Description/Только_ID (0.00s)
    --- PASS: TestVersionItem_Description/Только_время_модификации (0.00s)
    --- PASS: TestVersionItem_Description/Только_размер (0.00s)
    --- PASS: TestVersionItem_Description/Время_и_размер (0.00s)
    --- PASS: TestVersionItem_Description/Текущая_версия_со_временем_и_размером (0.00s)
=== RUN   TestVersionItem_FilterValue
=== RUN   TestVersionItem_FilterValue/Обычная_версия
=== RUN   TestVersionItem_FilterValue/Текущая_версия
--- PASS: TestVersionItem_FilterValue (0.00s)
    --- PASS: TestVersionItem_FilterValue/Обычная_версия (0.00s)
    --- PASS: TestVersionItem_FilterValue/Текущая_версия (0.00s)
=== RUN   TestInitPasswordInput
--- PASS: TestInitPasswordInput (0.00s)
=== RUN   TestInitEntryList
--- PASS: TestInitEntryList (0.00s)
=== RUN   TestInitAttachmentDeleteList
--- PASS: TestInitAttachmentDeleteList (0.00s)
=== RUN   TestInitAttachmentPathInput
--- PASS: TestInitAttachmentPathInput (0.00s)
=== RUN   TestInitNewKdbxPasswordInputs
--- PASS: TestInitNewKdbxPasswordInputs (0.00s)
=== RUN   TestInitSyncMenu
--- PASS: TestInitSyncMenu (0.00s)
=== RUN   TestInitServerURLInput
--- PASS: TestInitServerURLInput (0.00s)
=== RUN   TestInitLoginInputs
--- PASS: TestInitLoginInputs (0.00s)
=== RUN   TestInitRegisterInputs
--- PASS: TestInitRegisterInputs (0.00s)
=== RUN   TestInitDocStyle
--- PASS: TestInitDocStyle (0.00s)
=== RUN   TestInitVersionList
--- PASS: TestInitVersionList (0.00s)
=== RUN   TestInitModel
--- PASS: TestInitModel (0.00s)
=== RUN   TestHandleCredentialsKeys
=== RUN   TestHandleCredentialsKeys/TabKey
=== RUN   TestHandleCredentialsKeys/ShiftTabKey
=== RUN   TestHandleCredentialsKeys/EnterOnFirstField
=== RUN   TestHandleCredentialsKeys/EnterOnSecondField
=== RUN   TestHandleCredentialsKeys/UnhandledKey
--- PASS: TestHandleCredentialsKeys (0.00s)
    --- PASS: TestHandleCredentialsKeys/TabKey (0.00s)
    --- PASS: TestHandleCredentialsKeys/ShiftTabKey (0.00s)
    --- PASS: TestHandleCredentialsKeys/EnterOnFirstField (0.00s)
    --- PASS: TestHandleCredentialsKeys/EnterOnSecondField (0.00s)
    --- PASS: TestHandleCredentialsKeys/UnhandledKey (0.00s)
=== RUN   TestHandleCredentialsInput
=== RUN   TestHandleCredentialsInput/EscKey
=== RUN   TestHandleCredentialsInput/TabKey
=== RUN   TestHandleCredentialsInput/TextInputUpdate
--- PASS: TestHandleCredentialsInput (0.00s)
    --- PASS: TestHandleCredentialsInput/EscKey (0.00s)
    --- PASS: TestHandleCredentialsInput/TabKey (0.00s)
    --- PASS: TestHandleCredentialsInput/TextInputUpdate (0.00s)
=== RUN   TestScreenState_String
=== RUN   TestScreenState_String/welcomeScreen
=== RUN   TestScreenState_String/passwordInputScreen
=== RUN   TestScreenState_String/newKdbxPasswordScreen
=== RUN   TestScreenState_String/entryListScreen
=== RUN   TestScreenState_String/entryDetailScreen
=== RUN   TestScreenState_String/entryEditScreen
=== RUN   TestScreenState_String/entryAddScreen
=== RUN   TestScreenState_String/attachmentListDeleteScreen
=== RUN   TestScreenState_String/attachmentPathInputScreen
=== RUN   TestScreenState_String/syncServerScreen
=== RUN   TestScreenState_String/serverURLInputScreen
=== RUN   TestScreenState_String/loginRegisterChoiceScreen
=== RUN   TestScreenState_String/loginScreen
=== RUN   TestScreenState_String/registerScreen
=== RUN   TestScreenState_String/versionListScreen
=== RUN   TestScreenState_String/unknownScreen(999)
--- PASS: TestScreenState_String (0.00s)
    --- PASS: TestScreenState_String/welcomeScreen (0.00s)
    --- PASS: TestScreenState_String/passwordInputScreen (0.00s)
    --- PASS: TestScreenState_String/newKdbxPasswordScreen (0.00s)
    --- PASS: TestScreenState_String/entryListScreen (0.00s)
    --- PASS: TestScreenState_String/entryDetailScreen (0.00s)
    --- PASS: TestScreenState_String/entryEditScreen (0.00s)
    --- PASS: TestScreenState_String/entryAddScreen (0.00s)
    --- PASS: TestScreenState_String/attachmentListDeleteScreen (0.00s)
    --- PASS: TestScreenState_String/attachmentPathInputScreen (0.00s)
    --- PASS: TestScreenState_String/syncServerScreen (0.00s)
    --- PASS: TestScreenState_String/serverURLInputScreen (0.00s)
    --- PASS: TestScreenState_String/loginRegisterChoiceScreen (0.00s)
    --- PASS: TestScreenState_String/loginScreen (0.00s)
    --- PASS: TestScreenState_String/registerScreen (0.00s)
    --- PASS: TestScreenState_String/versionListScreen (0.00s)
    --- PASS: TestScreenState_String/unknownScreen(999) (0.00s)
=== RUN   TestEntryItem_Title
=== RUN   TestEntryItem_Title/С_Title
=== RUN   TestEntryItem_Title/Без_Title,_с_Username
=== RUN   TestEntryItem_Title/Только_URL_(используется_UUID)
=== RUN   TestEntryItem_Title/Пустая_запись_(используется_UUID)
--- PASS: TestEntryItem_Title (0.00s)
    --- PASS: TestEntryItem_Title/С_Title (0.00s)
    --- PASS: TestEntryItem_Title/Без_Title,_с_Username (0.00s)
    --- PASS: TestEntryItem_Title/Только_URL_(используется_UUID) (0.00s)
    --- PASS: TestEntryItem_Title/Пустая_запись_(используется_UUID) (0.00s)
=== RUN   TestEntryItem_Description
=== RUN   TestEntryItem_Description/Полная
=== RUN   TestEntryItem_Description/Только_User
=== RUN   TestEntryItem_Description/Только_URL
=== RUN   TestEntryItem_Description/Пустая
=== RUN   TestEntryItem_Description/User_+_Attach
=== RUN   TestEntryItem_Description/URL_+_Attach
=== RUN   TestEntryItem_Description/Пустая_+_Attach
--- PASS: TestEntryItem_Description (0.00s)
    --- PASS: TestEntryItem_Description/Полная (0.00s)
    --- PASS: TestEntryItem_Description/Только_User (0.00s)
    --- PASS: TestEntryItem_Description/Только_URL (0.00s)
    --- PASS: TestEntryItem_Description/Пустая (0.00s)
    --- PASS: TestEntryItem_Description/User_+_Attach (0.00s)
    --- PASS: TestEntryItem_Description/URL_+_Attach (0.00s)
    --- PASS: TestEntryItem_Description/Пустая_+_Attach (0.00s)
=== RUN   TestEntryItem_FilterValue
=== RUN   TestEntryItem_FilterValue/С_Title
=== RUN   TestEntryItem_FilterValue/Без_Title,_с_Username
=== RUN   TestEntryItem_FilterValue/Пустая_запись_(используется_UUID)
--- PASS: TestEntryItem_FilterValue (0.00s)
    --- PASS: TestEntryItem_FilterValue/С_Title (0.00s)
    --- PASS: TestEntryItem_FilterValue/Без_Title,_с_Username (0.00s)
    --- PASS: TestEntryItem_FilterValue/Пустая_запись_(используется_UUID) (0.00s)
=== RUN   TestPrepareAddScreen
--- PASS: TestPrepareAddScreen (0.00s)
=== RUN   TestCreateEntryFromInputs
2025/04/27 12:00:26 INFO Добавлено вложение к новой записи name=file1.txt binary_id=0
2025/04/27 12:00:26 INFO Добавлено вложение к новой записи name=image.png binary_id=1
--- PASS: TestCreateEntryFromInputs (0.00s)
=== RUN   TestUpdateEntryAddScreen
2025/04/27 12:00:26 INFO Отмена добавления, возврат к списку
2025/04/27 12:00:26 ERROR Не удалось добавить запись в m.db: база данных или Root не инициализированы
2025/04/27 12:00:26 INFO Новая запись добавлена title="New Entry Title"
2025/04/27 12:00:26 INFO Переход к экрану ввода пути для добавления вложения
--- PASS: TestUpdateEntryAddScreen (0.00s)
=== RUN   TestViewEntryAddScreen
=== RUN   TestViewEntryAddScreen/Без_вложений
=== RUN   TestViewEntryAddScreen/С_вложениями
--- PASS: TestViewEntryAddScreen (0.00s)
    --- PASS: TestViewEntryAddScreen/Без_вложений (0.00s)
    --- PASS: TestViewEntryAddScreen/С_вложениями (0.00s)
=== RUN   TestUpdateAttachmentListDeleteScreen
=== RUN   TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_в_режиме_ReadOnly
2025/04/27 12:00:26 WARN Попытка доступа к экрану удаления вложения в режиме Read-Only.
=== RUN   TestUpdateAttachmentListDeleteScreen/Обработка_подтверждения_удаления
2025/04/27 12:00:26 INFO Подтверждено удаление ссылки на вложение name=test.txt id=123
2025/04/27 12:00:26 INFO Ссылка на вложение успешно удалена из редактируемой записи
=== RUN   TestUpdateAttachmentListDeleteScreen/Отмена_подтверждения_удаления
=== RUN   TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_по_ESC
2025/04/27 12:00:26 INFO Отмена удаления вложения, возврат к редактированию
=== RUN   TestUpdateAttachmentListDeleteScreen/Выбор_вложения_для_удаления
=== RUN   TestUpdateAttachmentListDeleteScreen/Выбор_несуществующего_вложения
=== RUN   TestUpdateAttachmentListDeleteScreen/Обработка_неизвестной_клавиши
--- PASS: TestUpdateAttachmentListDeleteScreen (0.01s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_в_режиме_ReadOnly (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Обработка_подтверждения_удаления (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Отмена_подтверждения_удаления (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_по_ESC (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Выбор_вложения_для_удаления (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Выбор_несуществующего_вложения (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Обработка_неизвестной_клавиши (0.00s)
=== RUN   TestPerformAttachmentDelete
=== RUN   TestPerformAttachmentDelete/Успешное_удаление_вложения
2025/04/27 12:00:26 INFO Подтверждено удаление ссылки на вложение name=test.txt id=123
2025/04/27 12:00:26 INFO Ссылка на вложение успешно удалена из редактируемой записи
=== RUN   TestPerformAttachmentDelete/Попытка_удаления_без_выбранного_элемента
2025/04/27 12:00:26 ERROR Попытка удаления без выбранного itemToDelete
=== RUN   TestPerformAttachmentDelete/Вложение_не_найдено_в_записи
2025/04/27 12:00:26 INFO Подтверждено удаление ссылки на вложение name=test.txt id=123
2025/04/27 12:00:26 WARN Не удалось найти BinaryReference для удаления в editingEntry
--- PASS: TestPerformAttachmentDelete (0.00s)
    --- PASS: TestPerformAttachmentDelete/Успешное_удаление_вложения (0.00s)
    --- PASS: TestPerformAttachmentDelete/Попытка_удаления_без_выбранного_элемента (0.00s)
    --- PASS: TestPerformAttachmentDelete/Вложение_не_найдено_в_записи (0.00s)
=== RUN   TestViewAttachmentListDeleteScreen
=== RUN   TestViewAttachmentListDeleteScreen/Отображение_промпта_подтверждения
=== RUN   TestViewAttachmentListDeleteScreen/Отображение_списка_вложений
--- PASS: TestViewAttachmentListDeleteScreen (0.00s)
    --- PASS: TestViewAttachmentListDeleteScreen/Отображение_промпта_подтверждения (0.00s)
    --- PASS: TestViewAttachmentListDeleteScreen/Отображение_списка_вложений (0.00s)
=== RUN   TestUpdateAttachmentPathInputScreen
2025/04/27 12:00:26 INFO Отмена ввода пути вложения
--- PASS: TestUpdateAttachmentPathInputScreen (0.53s)
=== RUN   TestHandleAttachmentPathConfirm
2025/04/27 12:00:27 INFO Попытка добавить вложение из файла path=nonexistent.txt
2025/04/27 12:00:27 ERROR Ошибка чтения файла для вложения path=nonexistent.txt error="open nonexistent.txt: no such file or directory"
2025/04/27 12:00:27 INFO Попытка добавить вложение из файла path=/tmp/test_attachment_649730246.txt
2025/04/27 12:00:27 INFO Файл успешно прочитан name=test_attachment_649730246.txt size=20
2025/04/27 12:00:27 INFO Вложение добавлено к редактируемой записи name=test_attachment_649730246.txt binary_id=0
2025/04/27 12:00:27 INFO Попытка добавить вложение из файла path=/tmp/test_attachment_649730246.txt
2025/04/27 12:00:27 INFO Файл успешно прочитан name=test_attachment_649730246.txt size=20
2025/04/27 12:00:27 ERROR Неожиданный предыдущий экран при добавлении вложения state=syncServerScreen
--- PASS: TestHandleAttachmentPathConfirm (0.00s)
=== RUN   TestViewAttachmentPathInputScreen
--- PASS: TestViewAttachmentPathInputScreen (0.00s)
=== RUN   TestMaskCardNumber
=== RUN   TestMaskCardNumber/Short_number
=== RUN   TestMaskCardNumber/Exact_min_length
=== RUN   TestMaskCardNumber/Standard_length
=== RUN   TestMaskCardNumber/Long_number
=== RUN   TestMaskCardNumber/Empty_string
--- PASS: TestMaskCardNumber (0.00s)
    --- PASS: TestMaskCardNumber/Short_number (0.00s)
    --- PASS: TestMaskCardNumber/Exact_min_length (0.00s)
    --- PASS: TestMaskCardNumber/Standard_length (0.00s)
    --- PASS: TestMaskCardNumber/Long_number (0.00s)
    --- PASS: TestMaskCardNumber/Empty_string (0.00s)
=== RUN   TestRenderStandardFields
--- PASS: TestRenderStandardFields (0.00s)
=== RUN   TestRenderCustomFields
--- PASS: TestRenderCustomFields (0.00s)
=== RUN   TestViewEntryDetailScreen
--- PASS: TestViewEntryDetailScreen (0.00s)
=== RUN   TestUpdateEntryDetailScreen
=== RUN   TestUpdateEntryDetailScreen/Переход_к_редактированию_по_'e'
2025/04/27 12:00:27 INFO Переход к редактированию записи title="Detail Test"
=== RUN   TestUpdateEntryDetailScreen/Возврат_к_списку_по_'b'
2025/04/27 12:00:27 INFO Возврат к списку записей
--- PASS: TestUpdateEntryDetailScreen (0.00s)
    --- PASS: TestUpdateEntryDetailScreen/Переход_к_редактированию_по_'e' (0.00s)
    --- PASS: TestUpdateEntryDetailScreen/Возврат_к_списку_по_'b' (0.00s)
=== RUN   TestAttachmentItem_Title
=== RUN   TestAttachmentItem_Title/Обычное_имя_файла
=== RUN   TestAttachmentItem_Title/Пустое_имя
=== RUN   TestAttachmentItem_Title/Имя_с_пробелами
=== RUN   TestAttachmentItem_Title/Специальные_символы
--- PASS: TestAttachmentItem_Title (0.00s)
    --- PASS: TestAttachmentItem_Title/Обычное_имя_файла (0.00s)
    --- PASS: TestAttachmentItem_Title/Пустое_имя (0.00s)
    --- PASS: TestAttachmentItem_Title/Имя_с_пробелами (0.00s)
    --- PASS: TestAttachmentItem_Title/Специальные_символы (0.00s)
=== RUN   TestAttachmentItem_Description
=== RUN   TestAttachmentItem_Description/Положительный_ID
=== RUN   TestAttachmentItem_Description/Нулевой_ID
=== RUN   TestAttachmentItem_Description/Отрицательный_ID
--- PASS: TestAttachmentItem_Description (0.00s)
    --- PASS: TestAttachmentItem_Description/Положительный_ID (0.00s)
    --- PASS: TestAttachmentItem_Description/Нулевой_ID (0.00s)
    --- PASS: TestAttachmentItem_Description/Отрицательный_ID (0.00s)
=== RUN   TestAttachmentItem_FilterValue
=== RUN   TestAttachmentItem_FilterValue/Обычное_имя_файла
=== RUN   TestAttachmentItem_FilterValue/Пустое_имя
=== RUN   TestAttachmentItem_FilterValue/Имя_с_пробелами
--- PASS: TestAttachmentItem_FilterValue (0.00s)
    --- PASS: TestAttachmentItem_FilterValue/Обычное_имя_файла (0.00s)
    --- PASS: TestAttachmentItem_FilterValue/Пустое_имя (0.00s)
    --- PASS: TestAttachmentItem_FilterValue/Имя_с_пробелами (0.00s)
=== RUN   TestPrepareEditScreen
=== RUN   TestPrepareEditScreen/С_выбранной_записью
=== RUN   TestPrepareEditScreen/Без_выбранной_записи
--- PASS: TestPrepareEditScreen (0.00s)
    --- PASS: TestPrepareEditScreen/С_выбранной_записью (0.00s)
    --- PASS: TestPrepareEditScreen/Без_выбранной_записи (0.00s)
=== RUN   TestUpdateEntryEditScreen
=== RUN   TestUpdateEntryEditScreen/Обработка_клавиши_Escape
2025/04/27 12:00:27 INFO Отмена редактирования, возврат к деталям записи
=== RUN   TestUpdateEntryEditScreen/Навигация_с_помощью_Tab
=== RUN   TestUpdateEntryEditScreen/Сохранение_изменений_по_Enter
2025/04/27 12:00:27 INFO Изменения сохранены, возврат к деталям записи
=== RUN   TestUpdateEntryEditScreen/Редактирование_значения_поля
--- PASS: TestUpdateEntryEditScreen (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Обработка_клавиши_Escape (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Навигация_с_помощью_Tab (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Сохранение_изменений_по_Enter (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Редактирование_значения_поля (0.00s)
=== RUN   TestHandleAttachmentDeleteAction
=== RUN   TestHandleAttachmentDeleteAction/С_вложениями_для_удаления
2025/04/27 12:00:27 INFO Переход к экрану удаления вложения
=== RUN   TestHandleAttachmentDeleteAction/Без_вложений
2025/04/27 12:00:27 INFO Нет вложений для удаления
=== RUN   TestHandleAttachmentDeleteAction/editingEntry_is_nil
2025/04/27 12:00:27 INFO Нет вложений для удаления
--- PASS: TestHandleAttachmentDeleteAction (0.00s)
    --- PASS: TestHandleAttachmentDeleteAction/С_вложениями_для_удаления (0.00s)
    --- PASS: TestHandleAttachmentDeleteAction/Без_вложений (0.00s)
    --- PASS: TestHandleAttachmentDeleteAction/editingEntry_is_nil (0.00s)
=== RUN   TestViewEntryEditScreen
    screen_edit_test.go:406: Тест временно отключен из-за проблем с фокусом/отображением
--- SKIP: TestViewEntryEditScreen (0.00s)
=== RUN   TestUpdateEntryListScreen
=== RUN   TestUpdateEntryListScreen/Обработка_dbOpenedMsg
2025/04/27 12:00:27 INFO База KDBX успешно открыта path=""
2025/04/27 12:00:27 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 12:00:27 WARN API клиент не инициализирован (URL не задан), токен не установлен.
=== RUN   TestUpdateEntryListScreen/Навигация_по_списку_(вниз)
2025/04/27 12:00:27 INFO База KDBX успешно открыта path=""
2025/04/27 12:00:27 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 12:00:27 WARN API клиент не инициализирован (URL не задан), токен не установлен.
=== RUN   TestUpdateEntryListScreen/Навигация_по_списку_(вверх)
2025/04/27 12:00:27 INFO База KDBX успешно открыта path=""
2025/04/27 12:00:27 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 12:00:27 WARN API клиент не инициализирован (URL не задан), токен не установлен.
=== RUN   TestUpdateEntryListScreen/Переход_к_деталям_по_Enter
2025/04/27 12:00:27 INFO База KDBX успешно открыта path=""
2025/04/27 12:00:27 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 12:00:27 WARN API клиент не инициализирован (URL не задан), токен не установлен.
2025/04/27 12:00:27 INFO Переход к деталям записи title="Entry 1"
=== RUN   TestUpdateEntryListScreen/Переход_к_добавлению_по_'a'
2025/04/27 12:00:27 INFO База KDBX успешно открыта path=""
2025/04/27 12:00:27 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 12:00:27 WARN API клиент не инициализирован (URL не задан), токен не установлен.
2025/04/27 12:00:27 INFO Переход к добавлению новой записи
--- PASS: TestUpdateEntryListScreen (0.01s)
    --- PASS: TestUpdateEntryListScreen/Обработка_dbOpenedMsg (0.00s)
    --- PASS: TestUpdateEntryListScreen/Навигация_по_списку_(вниз) (0.00s)
    --- PASS: TestUpdateEntryListScreen/Навигация_по_списку_(вверх) (0.00s)
    --- PASS: TestUpdateEntryListScreen/Переход_к_деталям_по_Enter (0.00s)
    --- PASS: TestUpdateEntryListScreen/Переход_к_добавлению_по_'a' (0.00s)
=== RUN   TestHandleAuthLoadError
=== RUN   TestHandleAuthLoadError/URL_не_из_флага
2025/04/27 12:00:27 ERROR Ошибка загрузки Auth данных из KDBX error="test auth load error"
=== RUN   TestHandleAuthLoadError/URL_из_флага
2025/04/27 12:00:27 ERROR Ошибка загрузки Auth данных из KDBX error="test auth load error"
--- PASS: TestHandleAuthLoadError (0.00s)
    --- PASS: TestHandleAuthLoadError/URL_не_из_флага (0.00s)
    --- PASS: TestHandleAuthLoadError/URL_из_флага (0.00s)
=== RUN   TestHandleAuthLoadSuccess
=== RUN   TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_и_токен_загружены
2025/04/27 12:00:27 INFO URL сервера загружен из KDBX, создан API клиент url=http://loaded.url token_found=true
=== RUN   TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_пустой,_токен_загружен
2025/04/27 12:00:27 INFO URL сервера не задан и не найден в KDBX.
=== RUN   TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_загружен,_токен_пустой
2025/04/27 12:00:27 INFO URL сервера загружен из KDBX, создан API клиент url=http://loaded.url token_found=false
=== RUN   TestHandleAuthLoadSuccess/URL_из_флага,_токен_загружен
2025/04/27 12:00:27 INFO URL сервера задан флагом, загружен только токен из KDBX token_found=true
=== RUN   TestHandleAuthLoadSuccess/URL_из_флага,_токен_пустой
2025/04/27 12:00:27 INFO URL сервера задан флагом, загружен только токен из KDBX token_found=false
--- PASS: TestHandleAuthLoadSuccess (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_и_токен_загружены (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_пустой,_токен_загружен (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_загружен,_токен_пустой (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_из_флага,_токен_загружен (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_из_флага,_токен_пустой (0.00s)
=== RUN   TestUpdateLoginRegisterChoiceScreen
    screen_login_register_choice_test.go:15: Значения констант - syncServerScreen: 9, loginRegisterChoiceScreen: 11
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации_ВерхнийРегистр
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода_ВерхнийРегистр
=== RUN   TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей
=== RUN   TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей_Backspace
=== RUN   TestUpdateLoginRegisterChoiceScreen/ИгнорированиеДругихКлавиш
--- PASS: TestUpdateLoginRegisterChoiceScreen (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации_ВерхнийРегистр (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода_ВерхнийРегистр (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей_Backspace (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ИгнорированиеДругихКлавиш (0.00s)
=== RUN   TestViewLoginRegisterChoiceScreen
--- PASS: TestViewLoginRegisterChoiceScreen (0.00s)
=== RUN   TestUpdateLoginScreen
=== RUN   TestUpdateLoginScreen/ПереключениеПоляВперед
=== RUN   TestUpdateLoginScreen/ПереключениеПоляНазад
=== RUN   TestUpdateLoginScreen/ОтменаВхода
=== RUN   TestUpdateLoginScreen/НажатиеEnter_ПервоеПоле
=== RUN   TestUpdateLoginScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы
--- PASS: TestUpdateLoginScreen (0.00s)
    --- PASS: TestUpdateLoginScreen/ПереключениеПоляВперед (0.00s)
    --- PASS: TestUpdateLoginScreen/ПереключениеПоляНазад (0.00s)
    --- PASS: TestUpdateLoginScreen/ОтменаВхода (0.00s)
    --- PASS: TestUpdateLoginScreen/НажатиеEnter_ПервоеПоле (0.00s)
    --- PASS: TestUpdateLoginScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы (0.00s)
=== RUN   TestViewLoginScreen
--- PASS: TestViewLoginScreen (0.00s)
=== RUN   TestLoginWithScreenTestSuite
    screen_login_test.go:144: Требуется полностью переработать тесты для модели входа/авторизации
--- SKIP: TestLoginWithScreenTestSuite (0.00s)
=== RUN   TestViewNewKdbxPasswordScreen
=== RUN   TestViewNewKdbxPasswordScreen/Базовое_отображение_(фокус_на_первом_поле)
=== RUN   TestViewNewKdbxPasswordScreen/Отображение_с_фокусом_на_втором_поле
=== RUN   TestViewNewKdbxPasswordScreen/Отображение_с_ошибкой_совпадения_паролей
--- PASS: TestViewNewKdbxPasswordScreen (0.00s)
    --- PASS: TestViewNewKdbxPasswordScreen/Базовое_отображение_(фокус_на_первом_поле) (0.00s)
    --- PASS: TestViewNewKdbxPasswordScreen/Отображение_с_фокусом_на_втором_поле (0.00s)
    --- PASS: TestViewNewKdbxPasswordScreen/Отображение_с_ошибкой_совпадения_паролей (0.00s)
=== RUN   TestUpdateNewKdbxPasswordScreen
=== RUN   TestUpdateNewKdbxPasswordScreen/Выход_по_Esc
=== RUN   TestUpdateNewKdbxPasswordScreen/Выход_по_Ctrl+C
=== RUN   TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Tab/Down
=== RUN   TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Shift+Tab/Up
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(пустой_пароль)
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(непустой_пароль)
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(пароли_не_совпадают)
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(успешное_создание)
2025/04/27 12:00:27 INFO Пароли совпадают, создаем новую базу KDBX path=/tmp/TestUpdateNewKdbxPasswordScreenEnter_на_втором_поле_(успешное_создание)712179833/001/test_new.kdbx
2025/04/27 12:00:27 INFO Новый файл KDBX успешно создан и сохранен path=/tmp/TestUpdateNewKdbxPasswordScreenEnter_на_втором_поле_(успешное_создание)712179833/001/test_new.kdbx
=== RUN   TestUpdateNewKdbxPasswordScreen/Ввод_символов_в_активное_поле
--- PASS: TestUpdateNewKdbxPasswordScreen (0.01s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Выход_по_Esc (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Выход_по_Ctrl+C (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Tab/Down (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Shift+Tab/Up (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(пустой_пароль) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(непустой_пароль) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(пароли_не_совпадают) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(успешное_создание) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Ввод_символов_в_активное_поле (0.00s)
=== RUN   TestPasswordInputScreen
=== RUN   TestPasswordInputScreen/ОтрисовкаЭкрана
=== RUN   TestPasswordInputScreen/ОтображениеОшибки
=== RUN   TestPasswordInputScreen/ВводПароляИОтправкаКоманды
=== RUN   TestPasswordInputScreen/ОбработкаErrMsg
=== RUN   TestPasswordInputScreen/ОчисткаОшибкиПриНажатииКлавиши
--- PASS: TestPasswordInputScreen (0.00s)
    --- PASS: TestPasswordInputScreen/ОтрисовкаЭкрана (0.00s)
    --- PASS: TestPasswordInputScreen/ОтображениеОшибки (0.00s)
    --- PASS: TestPasswordInputScreen/ВводПароляИОтправкаКоманды (0.00s)
    --- PASS: TestPasswordInputScreen/ОбработкаErrMsg (0.00s)
    --- PASS: TestPasswordInputScreen/ОчисткаОшибкиПриНажатииКлавиши (0.00s)
=== RUN   TestUpdateRegisterScreen
=== RUN   TestUpdateRegisterScreen/ПереключениеПоляВперед
=== RUN   TestUpdateRegisterScreen/ПереключениеПоляНазад
=== RUN   TestUpdateRegisterScreen/ОтменаРегистрации
=== RUN   TestUpdateRegisterScreen/НажатиеEnter_ПервоеПоле
=== RUN   TestUpdateRegisterScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы
--- PASS: TestUpdateRegisterScreen (0.00s)
    --- PASS: TestUpdateRegisterScreen/ПереключениеПоляВперед (0.00s)
    --- PASS: TestUpdateRegisterScreen/ПереключениеПоляНазад (0.00s)
    --- PASS: TestUpdateRegisterScreen/ОтменаРегистрации (0.00s)
    --- PASS: TestUpdateRegisterScreen/НажатиеEnter_ПервоеПоле (0.00s)
    --- PASS: TestUpdateRegisterScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы (0.00s)
=== RUN   TestViewRegisterScreen
--- PASS: TestViewRegisterScreen (0.00s)
=== RUN   TestUpdateServerURLInputScreen
=== RUN   TestUpdateServerURLInputScreen/ОтменаВводаURL
=== RUN   TestUpdateServerURLInputScreen/ПодтверждениеВводаURL
2025/04/27 12:00:27 INFO URL сервера обновлен url=https://new.server
=== RUN   TestUpdateServerURLInputScreen/ИспользованиеПлейсхолдера
2025/04/27 12:00:27 INFO URL сервера обновлен url=https://default.server
=== RUN   TestUpdateServerURLInputScreen/ОбновлениеПоляВвода
--- PASS: TestUpdateServerURLInputScreen (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ОтменаВводаURL (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ПодтверждениеВводаURL (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ИспользованиеПлейсхолдера (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ОбновлениеПоляВвода (0.00s)
=== RUN   TestViewServerURLInputScreen
--- PASS: TestViewServerURLInputScreen (0.00s)
=== RUN   TestDirectServerURLInputScreen
=== RUN   TestDirectServerURLInputScreen/ОтменаВвода
=== RUN   TestDirectServerURLInputScreen/ПодтверждениеПустогоВвода
2025/04/27 12:00:27 INFO URL сервера обновлен url=https://default.server
--- PASS: TestDirectServerURLInputScreen (0.00s)
    --- PASS: TestDirectServerURLInputScreen/ОтменаВвода (0.00s)
    --- PASS: TestDirectServerURLInputScreen/ПодтверждениеПустогоВвода (0.00s)
=== RUN   TestSyncMenuItemMethods
--- PASS: TestSyncMenuItemMethods (0.00s)
=== RUN   TestWelcomeScreen
=== RUN   TestWelcomeScreen/ОтрисовкаЭкрана
=== RUN   TestWelcomeScreen/ПереходПриНажатииEnter
=== RUN   TestWelcomeScreen/ВыходПриНажатииQ
--- PASS: TestWelcomeScreen (0.00s)
    --- PASS: TestWelcomeScreen/ОтрисовкаЭкрана (0.00s)
    --- PASS: TestWelcomeScreen/ПереходПриНажатииEnter (0.00s)
    --- PASS: TestWelcomeScreen/ВыходПриНажатииQ (0.00s)
=== RUN   TestHandleDBSavedMsg
--- PASS: TestHandleDBSavedMsg (0.00s)
=== RUN   TestHandleDBSaveErrorMsg
--- PASS: TestHandleDBSaveErrorMsg (0.00s)
=== RUN   TestHandleClearStatusMsg
--- PASS: TestHandleClearStatusMsg (0.00s)
=== RUN   TestHandleSyncErrorMsg
=== RUN   TestHandleSyncErrorMsg/ОбычнаяОшибка
=== RUN   TestHandleSyncErrorMsg/ОшибкаАвторизации
--- PASS: TestHandleSyncErrorMsg (0.00s)
    --- PASS: TestHandleSyncErrorMsg/ОбычнаяОшибка (0.00s)
    --- PASS: TestHandleSyncErrorMsg/ОшибкаАвторизации (0.00s)
=== RUN   TestHandleSyncStartedMsg
--- PASS: TestHandleSyncStartedMsg (0.00s)
=== RUN   TestCanSave
=== RUN   TestCanSave/РазрешеноСохранение
=== RUN   TestCanSave/РежимТолькоЧтение
=== RUN   TestCanSave/НетБазыДанных
=== RUN   TestCanSave/НеподходящееСостояние
--- PASS: TestCanSave (0.00s)
    --- PASS: TestCanSave/РазрешеноСохранение (0.00s)
    --- PASS: TestCanSave/РежимТолькоЧтение (0.00s)
    --- PASS: TestCanSave/НетБазыДанных (0.00s)
    --- PASS: TestCanSave/НеподходящееСостояние (0.00s)
=== RUN   TestUpdateRootModTime
=== RUN   TestUpdateRootModTime/УспешноеОбновление
=== RUN   TestUpdateRootModTime/ПустаяБазаДанных
2025/04/27 12:00:27 WARN Не удалось обновить LastModificationTime: db, Content или Root is nil
=== RUN   TestUpdateRootModTime/НетКорневойГруппы
2025/04/27 12:00:27 WARN Не удалось обновить LastModificationTime: нет корневой группы
--- PASS: TestUpdateRootModTime (0.00s)
    --- PASS: TestUpdateRootModTime/УспешноеОбновление (0.00s)
    --- PASS: TestUpdateRootModTime/ПустаяБазаДанных (0.00s)
    --- PASS: TestUpdateRootModTime/НетКорневойГруппы (0.00s)
=== RUN   TestHandleGlobalKeys
=== RUN   TestHandleGlobalKeys/CtrlC
=== RUN   TestHandleGlobalKeys/CtrlS_РазрешеноСохранение
2025/04/27 12:00:27 INFO Начало обновления m.db перед сохранением
2025/04/27 12:00:27 INFO Обновление m.db завершено updated_count=0
2025/04/27 12:00:27 WARN Не удалось обновить LastModificationTime: db, Content или Root is nil
2025/04/27 12:00:27 INFO Запуск сохранения KDBX path=/tmp/test.kdbx
=== RUN   TestHandleGlobalKeys/CtrlS_ЗапрещеноСохранение
=== RUN   TestHandleGlobalKeys/ДругаяКлавиша
--- PASS: TestHandleGlobalKeys (0.00s)
    --- PASS: TestHandleGlobalKeys/CtrlC (0.00s)
    --- PASS: TestHandleGlobalKeys/CtrlS_РазрешеноСохранение (0.00s)
    --- PASS: TestHandleGlobalKeys/CtrlS_ЗапрещеноСохранение (0.00s)
    --- PASS: TestHandleGlobalKeys/ДругаяКлавиша (0.00s)
=== RUN   TestUpdateDBFromList
=== RUN   TestUpdateDBFromList/ОбновлениеСуществующейЗаписи
2025/04/27 12:00:27 INFO Начало обновления m.db перед сохранением
2025/04/27 12:00:27 INFO Обновление m.db завершено updated_count=1
=== RUN   TestUpdateDBFromList/ЗаписьНеНайденаВБазе
2025/04/27 12:00:27 INFO Начало обновления m.db перед сохранением
2025/04/27 12:00:27 WARN Запись из списка не найдена в m.db uuid="NG311LNNL5OViJ5dkOw3VQ=="
2025/04/27 12:00:27 INFO Обновление m.db завершено updated_count=0
=== RUN   TestUpdateDBFromList/ПустойСписок
2025/04/27 12:00:27 INFO Начало обновления m.db перед сохранением
2025/04/27 12:00:27 INFO Обновление m.db завершено updated_count=0
--- PASS: TestUpdateDBFromList (0.00s)
    --- PASS: TestUpdateDBFromList/ОбновлениеСуществующейЗаписи (0.00s)
    --- PASS: TestUpdateDBFromList/ЗаписьНеНайденаВБазе (0.00s)
    --- PASS: TestUpdateDBFromList/ПустойСписок (0.00s)
=== RUN   TestDeepCopyEntry
--- PASS: TestDeepCopyEntry (0.00s)
=== RUN   TestDeepCopyEntryAlias
--- PASS: TestDeepCopyEntryAlias (0.00s)
=== RUN   TestFindEntryInDB
=== RUN   TestFindEntryInDB/Entry_In_Root_Group
=== RUN   TestFindEntryInDB/Entry_In_Subgroup
=== RUN   TestFindEntryInDB/Nonexistent_Entry
=== RUN   TestFindEntryInDB/Nil_Database
=== RUN   TestFindEntryInDB/Nil_Content
=== RUN   TestFindEntryInDB/Nil_Root
--- PASS: TestFindEntryInDB (0.00s)
    --- PASS: TestFindEntryInDB/Entry_In_Root_Group (0.00s)
    --- PASS: TestFindEntryInDB/Entry_In_Subgroup (0.00s)
    --- PASS: TestFindEntryInDB/Nonexistent_Entry (0.00s)
    --- PASS: TestFindEntryInDB/Nil_Database (0.00s)
    --- PASS: TestFindEntryInDB/Nil_Content (0.00s)
    --- PASS: TestFindEntryInDB/Nil_Root (0.00s)
=== RUN   TestFindEntryInGroups
=== RUN   TestFindEntryInGroups/Entry_In_Root_Group
=== RUN   TestFindEntryInGroups/Entry_In_Subgroup
=== RUN   TestFindEntryInGroups/Nonexistent_Entry
=== RUN   TestFindEntryInGroups/Empty_Groups
--- PASS: TestFindEntryInGroups (0.00s)
    --- PASS: TestFindEntryInGroups/Entry_In_Root_Group (0.00s)
    --- PASS: TestFindEntryInGroups/Entry_In_Subgroup (0.00s)
    --- PASS: TestFindEntryInGroups/Nonexistent_Entry (0.00s)
    --- PASS: TestFindEntryInGroups/Empty_Groups (0.00s)
=== RUN   TestFindEntryInDBAlias
--- PASS: TestFindEntryInDBAlias (0.00s)
PASS
ok  	github.com/maynagashev/gophkeeper/client/internal/tui	0.628s
