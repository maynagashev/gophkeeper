?   	github.com/maynagashev/gophkeeper/client/cmd/gophkeeper	[no test files]
=== RUN   TestHTTPClient_UploadVault
=== RUN   TestHTTPClient_UploadVault/Успех
=== RUN   TestHTTPClient_UploadVault/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_UploadVault/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_UploadVault/Без_токена_авторизации
--- PASS: TestHTTPClient_UploadVault (0.01s)
    --- PASS: TestHTTPClient_UploadVault/Успех (0.00s)
    --- PASS: TestHTTPClient_UploadVault/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_UploadVault/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_UploadVault/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_GetVaultMetadata
=== RUN   TestHTTPClient_GetVaultMetadata/Успех
=== RUN   TestHTTPClient_GetVaultMetadata/Хранилище_не_найдено_(404)
=== RUN   TestHTTPClient_GetVaultMetadata/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_GetVaultMetadata/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_GetVaultMetadata/Невалидный_JSON_ответ
=== RUN   TestHTTPClient_GetVaultMetadata/Без_токена_авторизации
--- PASS: TestHTTPClient_GetVaultMetadata (0.01s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Успех (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Хранилище_не_найдено_(404) (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Невалидный_JSON_ответ (0.00s)
    --- PASS: TestHTTPClient_GetVaultMetadata/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_Register
=== RUN   TestHTTPClient_Register/Успешная_регистрация
=== RUN   TestHTTPClient_Register/Ошибка_при_занятом_имени_пользователя_(409)
=== RUN   TestHTTPClient_Register/Ошибка_сервера_(500)
--- PASS: TestHTTPClient_Register (0.00s)
    --- PASS: TestHTTPClient_Register/Успешная_регистрация (0.00s)
    --- PASS: TestHTTPClient_Register/Ошибка_при_занятом_имени_пользователя_(409) (0.00s)
    --- PASS: TestHTTPClient_Register/Ошибка_сервера_(500) (0.00s)
=== RUN   TestHTTPClient_Login
=== RUN   TestHTTPClient_Login/Успешный_вход
=== RUN   TestHTTPClient_Login/Неверные_учетные_данные_(401)
=== RUN   TestHTTPClient_Login/Пользователь_не_найден_(404)
=== RUN   TestHTTPClient_Login/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_Login/Невалидный_JSON_ответ
--- PASS: TestHTTPClient_Login (0.01s)
    --- PASS: TestHTTPClient_Login/Успешный_вход (0.00s)
    --- PASS: TestHTTPClient_Login/Неверные_учетные_данные_(401) (0.00s)
    --- PASS: TestHTTPClient_Login/Пользователь_не_найден_(404) (0.00s)
    --- PASS: TestHTTPClient_Login/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_Login/Невалидный_JSON_ответ (0.00s)
=== RUN   TestHTTPClient_DownloadVault
=== RUN   TestHTTPClient_DownloadVault/Успешное_скачивание
=== RUN   TestHTTPClient_DownloadVault/Хранилище_не_найдено_(404)
=== RUN   TestHTTPClient_DownloadVault/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_DownloadVault/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_DownloadVault/Без_токена_авторизации
--- PASS: TestHTTPClient_DownloadVault (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Успешное_скачивание (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Хранилище_не_найдено_(404) (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_DownloadVault/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_ListVersions
=== RUN   TestHTTPClient_ListVersions/Успешное_получение_списка_версий
=== RUN   TestHTTPClient_ListVersions/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_ListVersions/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_ListVersions/Невалидный_JSON_ответ
=== RUN   TestHTTPClient_ListVersions/Без_токена_авторизации
--- PASS: TestHTTPClient_ListVersions (0.01s)
    --- PASS: TestHTTPClient_ListVersions/Успешное_получение_списка_версий (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Невалидный_JSON_ответ (0.00s)
    --- PASS: TestHTTPClient_ListVersions/Без_токена_авторизации (0.00s)
=== RUN   TestHTTPClient_RollbackToVersion
=== RUN   TestHTTPClient_RollbackToVersion/Успешный_откат
=== RUN   TestHTTPClient_RollbackToVersion/Версия_не_найдена_(404)
=== RUN   TestHTTPClient_RollbackToVersion/Неверный_запрос_(400)
=== RUN   TestHTTPClient_RollbackToVersion/Ошибка_авторизации_(401)
=== RUN   TestHTTPClient_RollbackToVersion/Ошибка_сервера_(500)
=== RUN   TestHTTPClient_RollbackToVersion/Без_токена_авторизации
--- PASS: TestHTTPClient_RollbackToVersion (0.01s)
    --- PASS: TestHTTPClient_RollbackToVersion/Успешный_откат (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Версия_не_найдена_(404) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Неверный_запрос_(400) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Ошибка_авторизации_(401) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Ошибка_сервера_(500) (0.00s)
    --- PASS: TestHTTPClient_RollbackToVersion/Без_токена_авторизации (0.00s)
PASS
ok  	github.com/maynagashev/gophkeeper/client/internal/api	(cached)
=== RUN   TestSaveAuthData
=== RUN   TestSaveAuthData/Success_Save_Auth_Data
=== RUN   TestSaveAuthData/Success_Update_Auth_Data
=== RUN   TestSaveAuthData/Success_Remove_Auth_Data
=== RUN   TestSaveAuthData/Error_With_Nil_Database
=== RUN   TestSaveAuthData/Error_With_Nil_Content
=== RUN   TestSaveAuthData/Error_With_Nil_Meta
--- PASS: TestSaveAuthData (0.01s)
    --- PASS: TestSaveAuthData/Success_Save_Auth_Data (0.00s)
    --- PASS: TestSaveAuthData/Success_Update_Auth_Data (0.01s)
    --- PASS: TestSaveAuthData/Success_Remove_Auth_Data (0.00s)
    --- PASS: TestSaveAuthData/Error_With_Nil_Database (0.00s)
    --- PASS: TestSaveAuthData/Error_With_Nil_Content (0.00s)
    --- PASS: TestSaveAuthData/Error_With_Nil_Meta (0.00s)
=== RUN   TestLoadAuthData
=== RUN   TestLoadAuthData/Success_Load_Auth_Data
=== RUN   TestLoadAuthData/Success_Load_Empty_Auth_Data
=== RUN   TestLoadAuthData/Error_With_Nil_Database
=== RUN   TestLoadAuthData/Error_With_Nil_Content
=== RUN   TestLoadAuthData/Error_With_Nil_Meta
--- PASS: TestLoadAuthData (0.00s)
    --- PASS: TestLoadAuthData/Success_Load_Auth_Data (0.00s)
    --- PASS: TestLoadAuthData/Success_Load_Empty_Auth_Data (0.00s)
    --- PASS: TestLoadAuthData/Error_With_Nil_Database (0.00s)
    --- PASS: TestLoadAuthData/Error_With_Nil_Content (0.00s)
    --- PASS: TestLoadAuthData/Error_With_Nil_Meta (0.00s)
=== RUN   TestSaveFile
=== RUN   TestSaveFile/Success_Save_New_File
=== RUN   TestSaveFile/Error_Save_Nil_Database
=== RUN   TestSaveFile/Error_Save_With_Empty_Password
=== RUN   TestSaveFile/Success_Save_In_Nonexistent_Directory
=== RUN   TestSaveFile/Success_Overwrite_Existing_File
--- PASS: TestSaveFile (0.01s)
    --- PASS: TestSaveFile/Success_Save_New_File (0.00s)
    --- PASS: TestSaveFile/Error_Save_Nil_Database (0.00s)
    --- PASS: TestSaveFile/Error_Save_With_Empty_Password (0.00s)
    --- PASS: TestSaveFile/Success_Save_In_Nonexistent_Directory (0.00s)
    --- PASS: TestSaveFile/Success_Overwrite_Existing_File (0.01s)
=== RUN   TestOpenFile
=== RUN   TestOpenFile/Success_With_Correct_Password
=== RUN   TestOpenFile/Error_With_Incorrect_Password
=== RUN   TestOpenFile/Error_With_Nonexistent_File
--- PASS: TestOpenFile (1.13s)
    --- PASS: TestOpenFile/Success_With_Correct_Password (0.53s)
    --- PASS: TestOpenFile/Error_With_Incorrect_Password (0.60s)
    --- PASS: TestOpenFile/Error_With_Nonexistent_File (0.00s)
=== RUN   TestGetAllEntries
=== RUN   TestGetAllEntries/Success_Get_Entries
=== RUN   TestGetAllEntries/Handle_Nil_Database
--- PASS: TestGetAllEntries (0.55s)
    --- PASS: TestGetAllEntries/Success_Get_Entries (0.55s)
    --- PASS: TestGetAllEntries/Handle_Nil_Database (0.00s)
=== RUN   TestCreateDatabase
=== RUN   TestCreateDatabase/Create_New_Database
--- PASS: TestCreateDatabase (0.00s)
    --- PASS: TestCreateDatabase/Create_New_Database (0.00s)
=== RUN   TestSaveFileFunction
=== RUN   TestSaveFileFunction/Успешное_сохранение_файла
=== RUN   TestSaveFileFunction/Ошибка_при_nil_базе_данных
=== RUN   TestSaveFileFunction/Ошибка_при_пустом_пароле
=== RUN   TestSaveFileFunction/Ошибка_записи_в_недоступный_каталог
--- PASS: TestSaveFileFunction (0.00s)
    --- PASS: TestSaveFileFunction/Успешное_сохранение_файла (0.00s)
    --- PASS: TestSaveFileFunction/Ошибка_при_nil_базе_данных (0.00s)
    --- PASS: TestSaveFileFunction/Ошибка_при_пустом_пароле (0.00s)
    --- PASS: TestSaveFileFunction/Ошибка_записи_в_недоступный_каталог (0.00s)
PASS
ok  	github.com/maynagashev/gophkeeper/client/internal/kdbx	(cached)
=== RUN   TestHandleAPIMessages
=== RUN   TestHandleAPIMessages/УспешныйВход
2025/04/27 20:25:29 INFO Auth данные успешно обновлены в KDBX (в памяти)
=== RUN   TestHandleAPIMessages/ОшибкаВхода
=== RUN   TestHandleAPIMessages/УспешнаяРегистрация
=== RUN   TestHandleAPIMessages/ОшибкаРегистрации
=== RUN   TestHandleAPIMessages/НеобрабатываемоеСообщение
--- PASS: TestHandleAPIMessages (0.00s)
    --- PASS: TestHandleAPIMessages/УспешныйВход (0.00s)
    --- PASS: TestHandleAPIMessages/ОшибкаВхода (0.00s)
    --- PASS: TestHandleAPIMessages/УспешнаяРегистрация (0.00s)
    --- PASS: TestHandleAPIMessages/ОшибкаРегистрации (0.00s)
    --- PASS: TestHandleAPIMessages/НеобрабатываемоеСообщение (0.00s)
=== RUN   TestOpenKdbxCmd
=== RUN   TestOpenKdbxCmd/SuccessfulOpen
=== RUN   TestOpenKdbxCmd/FileNotFound
=== RUN   TestOpenKdbxCmd/WrongPassword
--- PASS: TestOpenKdbxCmd (0.00s)
    --- PASS: TestOpenKdbxCmd/SuccessfulOpen (0.00s)
    --- PASS: TestOpenKdbxCmd/FileNotFound (0.00s)
    --- PASS: TestOpenKdbxCmd/WrongPassword (0.00s)
=== RUN   TestSaveKdbxCmd
=== RUN   TestSaveKdbxCmd/SuccessfulSave
=== RUN   TestSaveKdbxCmd/NilDatabase
=== RUN   TestSaveKdbxCmd/EmptyPath
=== RUN   TestSaveKdbxCmd/InaccessibleDirectory
--- PASS: TestSaveKdbxCmd (0.00s)
    --- PASS: TestSaveKdbxCmd/SuccessfulSave (0.00s)
    --- PASS: TestSaveKdbxCmd/NilDatabase (0.00s)
    --- PASS: TestSaveKdbxCmd/EmptyPath (0.00s)
    --- PASS: TestSaveKdbxCmd/InaccessibleDirectory (0.00s)
=== RUN   TestClearStatusCmd
--- PASS: TestClearStatusCmd (0.02s)
=== RUN   TestMakeLoginCmd
=== RUN   TestMakeLoginCmd/SuccessfulLogin
=== RUN   TestMakeLoginCmd/LoginError
--- PASS: TestMakeLoginCmd (0.00s)
    --- PASS: TestMakeLoginCmd/SuccessfulLogin (0.00s)
    --- PASS: TestMakeLoginCmd/LoginError (0.00s)
=== RUN   TestMakeRegisterCmd
=== RUN   TestMakeRegisterCmd/SuccessfulRegistration
=== RUN   TestMakeRegisterCmd/RegistrationError
--- PASS: TestMakeRegisterCmd (0.00s)
    --- PASS: TestMakeRegisterCmd/SuccessfulRegistration (0.00s)
    --- PASS: TestMakeRegisterCmd/RegistrationError (0.00s)
=== RUN   TestStartSyncCmd
=== RUN   TestStartSyncCmd/AllPreconditionsOK
2025/04/27 20:25:29 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 20:25:29 INFO Предусловия синхронизации выполнены.
=== RUN   TestStartSyncCmd/NoServerURL
2025/04/27 20:25:29 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 20:25:29 WARN Предусловие синхронизации не выполнено: URL error="URL сервера не настроен"
=== RUN   TestStartSyncCmd/NoAuthToken
2025/04/27 20:25:29 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 20:25:29 WARN Предусловие синхронизации не выполнено: Token error="необходимо войти на сервер"
=== RUN   TestStartSyncCmd/NoAPIClient
2025/04/27 20:25:29 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 20:25:29 ERROR Критическая ошибка: apiClient nil error="API клиент не инициализирован"
=== RUN   TestStartSyncCmd/NoDatabase
2025/04/27 20:25:29 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 20:25:29 ERROR Критическая ошибка: m.db nil error="локальная база данных не загружена"
--- PASS: TestStartSyncCmd (0.00s)
    --- PASS: TestStartSyncCmd/AllPreconditionsOK (0.00s)
    --- PASS: TestStartSyncCmd/NoServerURL (0.00s)
    --- PASS: TestStartSyncCmd/NoAuthToken (0.00s)
    --- PASS: TestStartSyncCmd/NoAPIClient (0.00s)
    --- PASS: TestStartSyncCmd/NoDatabase (0.00s)
=== RUN   TestFetchServerMetadataCmd
=== RUN   TestFetchServerMetadataCmd/SuccessfulMetadataFetch
=== RUN   TestFetchServerMetadataCmd/ErrorFetchingMetadata
2025/04/27 20:25:29 ERROR Ошибка получения метаданных с сервера error="ошибка получения метаданных"
--- PASS: TestFetchServerMetadataCmd (0.00s)
    --- PASS: TestFetchServerMetadataCmd/SuccessfulMetadataFetch (0.00s)
    --- PASS: TestFetchServerMetadataCmd/ErrorFetchingMetadata (0.00s)
=== RUN   TestFetchLocalMetadataCmd
=== RUN   TestFetchLocalMetadataCmd/SuccessfulLocalMetadataFetch
=== RUN   TestFetchLocalMetadataCmd/FileNotFound
2025/04/27 20:25:29 INFO Локальный файл KDBX не найден.
=== RUN   TestFetchLocalMetadataCmd/NoPathInModel
2025/04/27 20:25:29 INFO Локальный файл KDBX не найден.
--- PASS: TestFetchLocalMetadataCmd (0.00s)
    --- PASS: TestFetchLocalMetadataCmd/SuccessfulLocalMetadataFetch (0.00s)
    --- PASS: TestFetchLocalMetadataCmd/FileNotFound (0.00s)
    --- PASS: TestFetchLocalMetadataCmd/NoPathInModel (0.00s)
=== RUN   TestUploadVaultCmd
=== RUN   TestUploadVaultCmd/SuccessfulUpload
2025/04/27 20:25:29 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 20:25:29 INFO Обновление m.db завершено.
2025/04/27 20:25:29 INFO Запуск загрузки KDBX на сервер... fileModTime=2025-04-27T20:25:29.121+07:00
2025/04/27 20:25:29 INFO Загрузка KDBX на сервер успешно завершена.
=== RUN   TestUploadVaultCmd/APIError
2025/04/27 20:25:29 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 20:25:29 INFO Обновление m.db завершено.
2025/04/27 20:25:29 INFO Запуск загрузки KDBX на сервер... fileModTime=2025-04-27T20:25:29.121+07:00
2025/04/27 20:25:29 ERROR Ошибка загрузки KDBX на сервер error="ошибка загрузки"
=== RUN   TestUploadVaultCmd/NoDatabaseLoaded
2025/04/27 20:25:29 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 20:25:29 INFO Обновление m.db завершено.
2025/04/27 20:25:29 ERROR Попытка загрузки хранилища, но m.db is nil
=== RUN   TestUploadVaultCmd/FileNotFoundForMetadata
2025/04/27 20:25:29 INFO Подготовка к загрузке: обновление m.db из TUI...
2025/04/27 20:25:29 INFO Обновление m.db завершено.
2025/04/27 20:25:29 ERROR Ошибка получения метаданных локального файла перед загрузкой path=/tmp/gophkeeper_test_1709837763/non_existent.kdbx error="stat /tmp/gophkeeper_test_1709837763/non_existent.kdbx: no such file or directory"
--- PASS: TestUploadVaultCmd (0.01s)
    --- PASS: TestUploadVaultCmd/SuccessfulUpload (0.00s)
    --- PASS: TestUploadVaultCmd/APIError (0.00s)
    --- PASS: TestUploadVaultCmd/NoDatabaseLoaded (0.00s)
    --- PASS: TestUploadVaultCmd/FileNotFoundForMetadata (0.00s)
=== RUN   TestDownloadVaultCmd
=== RUN   TestDownloadVaultCmd/SuccessfulDownload
2025/04/27 20:25:29 INFO Запуск скачивания KDBX с сервера...
2025/04/27 20:25:29 INFO Скачивание KDBX с сервера и сохранение локально завершено.
=== RUN   TestDownloadVaultCmd/APIError
2025/04/27 20:25:29 INFO Запуск скачивания KDBX с сервера...
2025/04/27 20:25:29 ERROR Ошибка скачивания KDBX с сервера error="ошибка скачивания"
=== RUN   TestDownloadVaultCmd/WriteError
2025/04/27 20:25:29 INFO Запуск скачивания KDBX с сервера...
2025/04/27 20:25:29 ERROR Ошибка открытия локального файла для записи path=/tmp/gophkeeper_test_1026945999/readonly/test.kdbx error="open /tmp/gophkeeper_test_1026945999/readonly/test.kdbx: permission denied"
--- PASS: TestDownloadVaultCmd (0.00s)
    --- PASS: TestDownloadVaultCmd/SuccessfulDownload (0.00s)
    --- PASS: TestDownloadVaultCmd/APIError (0.00s)
    --- PASS: TestDownloadVaultCmd/WriteError (0.00s)
=== RUN   TestListVersionsCmd
=== RUN   TestListVersionsCmd/УспешнаяЗагрузкаВерсий
2025/04/27 20:25:29 INFO Список версий успешно загружен count=2 current_id=2
=== RUN   TestListVersionsCmd/APIКлиентНеИнициализирован
=== RUN   TestListVersionsCmd/ОтсутствуетТокенАвторизации
=== RUN   TestListVersionsCmd/ОшибкаAPI
2025/04/27 20:25:29 ERROR Ошибка загрузки списка версий error="ошибка сети"
=== RUN   TestListVersionsCmd/ОшибкаАвторизации
2025/04/27 20:25:29 ERROR Ошибка загрузки списка версий: ошибка авторизации
--- PASS: TestListVersionsCmd (0.00s)
    --- PASS: TestListVersionsCmd/УспешнаяЗагрузкаВерсий (0.00s)
    --- PASS: TestListVersionsCmd/APIКлиентНеИнициализирован (0.00s)
    --- PASS: TestListVersionsCmd/ОтсутствуетТокенАвторизации (0.00s)
    --- PASS: TestListVersionsCmd/ОшибкаAPI (0.00s)
    --- PASS: TestListVersionsCmd/ОшибкаАвторизации (0.00s)
=== RUN   TestRollbackToVersionCmd
=== RUN   TestRollbackToVersionCmd/УспешныйОткат
2025/04/27 20:25:29 INFO Успешный откат к версии version_id=10
=== RUN   TestRollbackToVersionCmd/APIКлиентНеИнициализирован
=== RUN   TestRollbackToVersionCmd/ОтсутствуетТокенАвторизации
=== RUN   TestRollbackToVersionCmd/ОшибкаОтката
2025/04/27 20:25:29 ERROR Ошибка отката к версии version_id=10 error="версия не найдена"
--- PASS: TestRollbackToVersionCmd (0.00s)
    --- PASS: TestRollbackToVersionCmd/УспешныйОткат (0.00s)
    --- PASS: TestRollbackToVersionCmd/APIКлиентНеИнициализирован (0.00s)
    --- PASS: TestRollbackToVersionCmd/ОтсутствуетТокенАвторизации (0.00s)
    --- PASS: TestRollbackToVersionCmd/ОшибкаОтката (0.00s)
=== RUN   TestApplyUIChangesToDB
=== RUN   TestApplyUIChangesToDB/УспешноеОбновлениеЗаписей
=== RUN   TestApplyUIChangesToDB/НесуществующийUUID
2025/04/27 20:25:29 WARN Запись из списка не найдена в m.db при подготовке к загрузке uuid="90xzg2EKFgVIYolNyk4NhQ=="
=== RUN   TestApplyUIChangesToDB/ПустойСписок
--- PASS: TestApplyUIChangesToDB (0.00s)
    --- PASS: TestApplyUIChangesToDB/УспешноеОбновлениеЗаписей (0.00s)
    --- PASS: TestApplyUIChangesToDB/НесуществующийUUID (0.00s)
    --- PASS: TestApplyUIChangesToDB/ПустойСписок (0.00s)
=== RUN   TestVersionItem_Title
=== RUN   TestVersionItem_Title/Обычная_версия
=== RUN   TestVersionItem_Title/Текущая_версия
--- PASS: TestVersionItem_Title (0.00s)
    --- PASS: TestVersionItem_Title/Обычная_версия (0.00s)
    --- PASS: TestVersionItem_Title/Текущая_версия (0.00s)
=== RUN   TestVersionItem_Description
=== RUN   TestVersionItem_Description/Только_ID
=== RUN   TestVersionItem_Description/Только_время_модификации
=== RUN   TestVersionItem_Description/Только_размер
=== RUN   TestVersionItem_Description/Время_и_размер
=== RUN   TestVersionItem_Description/Текущая_версия_со_временем_и_размером
--- PASS: TestVersionItem_Description (0.00s)
    --- PASS: TestVersionItem_Description/Только_ID (0.00s)
    --- PASS: TestVersionItem_Description/Только_время_модификации (0.00s)
    --- PASS: TestVersionItem_Description/Только_размер (0.00s)
    --- PASS: TestVersionItem_Description/Время_и_размер (0.00s)
    --- PASS: TestVersionItem_Description/Текущая_версия_со_временем_и_размером (0.00s)
=== RUN   TestVersionItem_FilterValue
=== RUN   TestVersionItem_FilterValue/Обычная_версия
=== RUN   TestVersionItem_FilterValue/Текущая_версия
--- PASS: TestVersionItem_FilterValue (0.00s)
    --- PASS: TestVersionItem_FilterValue/Обычная_версия (0.00s)
    --- PASS: TestVersionItem_FilterValue/Текущая_версия (0.00s)
=== RUN   TestInitPasswordInput
--- PASS: TestInitPasswordInput (0.00s)
=== RUN   TestInitEntryList
--- PASS: TestInitEntryList (0.00s)
=== RUN   TestInitAttachmentDeleteList
--- PASS: TestInitAttachmentDeleteList (0.00s)
=== RUN   TestInitAttachmentPathInput
--- PASS: TestInitAttachmentPathInput (0.00s)
=== RUN   TestInitNewKdbxPasswordInputs
--- PASS: TestInitNewKdbxPasswordInputs (0.00s)
=== RUN   TestInitSyncMenu
--- PASS: TestInitSyncMenu (0.00s)
=== RUN   TestInitServerURLInput
--- PASS: TestInitServerURLInput (0.00s)
=== RUN   TestInitLoginInputs
--- PASS: TestInitLoginInputs (0.00s)
=== RUN   TestInitRegisterInputs
--- PASS: TestInitRegisterInputs (0.00s)
=== RUN   TestInitDocStyle
--- PASS: TestInitDocStyle (0.00s)
=== RUN   TestInitVersionList
--- PASS: TestInitVersionList (0.00s)
=== RUN   TestInitModel
--- PASS: TestInitModel (0.00s)
=== RUN   TestHandleCredentialsKeys
=== RUN   TestHandleCredentialsKeys/TabKey
=== RUN   TestHandleCredentialsKeys/ShiftTabKey
=== RUN   TestHandleCredentialsKeys/EnterOnFirstField
=== RUN   TestHandleCredentialsKeys/EnterOnSecondField
=== RUN   TestHandleCredentialsKeys/UnhandledKey
--- PASS: TestHandleCredentialsKeys (0.00s)
    --- PASS: TestHandleCredentialsKeys/TabKey (0.00s)
    --- PASS: TestHandleCredentialsKeys/ShiftTabKey (0.00s)
    --- PASS: TestHandleCredentialsKeys/EnterOnFirstField (0.00s)
    --- PASS: TestHandleCredentialsKeys/EnterOnSecondField (0.00s)
    --- PASS: TestHandleCredentialsKeys/UnhandledKey (0.00s)
=== RUN   TestHandleCredentialsInput
=== RUN   TestHandleCredentialsInput/EscKey
=== RUN   TestHandleCredentialsInput/TabKey
=== RUN   TestHandleCredentialsInput/TextInputUpdate
--- PASS: TestHandleCredentialsInput (0.00s)
    --- PASS: TestHandleCredentialsInput/EscKey (0.00s)
    --- PASS: TestHandleCredentialsInput/TabKey (0.00s)
    --- PASS: TestHandleCredentialsInput/TextInputUpdate (0.00s)
=== RUN   TestScreenState_String
=== RUN   TestScreenState_String/welcomeScreen
=== RUN   TestScreenState_String/passwordInputScreen
=== RUN   TestScreenState_String/newKdbxPasswordScreen
=== RUN   TestScreenState_String/entryListScreen
=== RUN   TestScreenState_String/entryDetailScreen
=== RUN   TestScreenState_String/entryEditScreen
=== RUN   TestScreenState_String/entryAddScreen
=== RUN   TestScreenState_String/attachmentListDeleteScreen
=== RUN   TestScreenState_String/attachmentPathInputScreen
=== RUN   TestScreenState_String/syncServerScreen
=== RUN   TestScreenState_String/serverURLInputScreen
=== RUN   TestScreenState_String/loginRegisterChoiceScreen
=== RUN   TestScreenState_String/loginScreen
=== RUN   TestScreenState_String/registerScreen
=== RUN   TestScreenState_String/versionListScreen
=== RUN   TestScreenState_String/unknownScreen(999)
--- PASS: TestScreenState_String (0.00s)
    --- PASS: TestScreenState_String/welcomeScreen (0.00s)
    --- PASS: TestScreenState_String/passwordInputScreen (0.00s)
    --- PASS: TestScreenState_String/newKdbxPasswordScreen (0.00s)
    --- PASS: TestScreenState_String/entryListScreen (0.00s)
    --- PASS: TestScreenState_String/entryDetailScreen (0.00s)
    --- PASS: TestScreenState_String/entryEditScreen (0.00s)
    --- PASS: TestScreenState_String/entryAddScreen (0.00s)
    --- PASS: TestScreenState_String/attachmentListDeleteScreen (0.00s)
    --- PASS: TestScreenState_String/attachmentPathInputScreen (0.00s)
    --- PASS: TestScreenState_String/syncServerScreen (0.00s)
    --- PASS: TestScreenState_String/serverURLInputScreen (0.00s)
    --- PASS: TestScreenState_String/loginRegisterChoiceScreen (0.00s)
    --- PASS: TestScreenState_String/loginScreen (0.00s)
    --- PASS: TestScreenState_String/registerScreen (0.00s)
    --- PASS: TestScreenState_String/versionListScreen (0.00s)
    --- PASS: TestScreenState_String/unknownScreen(999) (0.00s)
=== RUN   TestEntryItem_Title
=== RUN   TestEntryItem_Title/С_Title
=== RUN   TestEntryItem_Title/Без_Title,_с_Username
=== RUN   TestEntryItem_Title/Только_URL_(используется_UUID)
=== RUN   TestEntryItem_Title/Пустая_запись_(используется_UUID)
--- PASS: TestEntryItem_Title (0.00s)
    --- PASS: TestEntryItem_Title/С_Title (0.00s)
    --- PASS: TestEntryItem_Title/Без_Title,_с_Username (0.00s)
    --- PASS: TestEntryItem_Title/Только_URL_(используется_UUID) (0.00s)
    --- PASS: TestEntryItem_Title/Пустая_запись_(используется_UUID) (0.00s)
=== RUN   TestEntryItem_Description
=== RUN   TestEntryItem_Description/Полная
=== RUN   TestEntryItem_Description/Только_User
=== RUN   TestEntryItem_Description/Только_URL
=== RUN   TestEntryItem_Description/Пустая
=== RUN   TestEntryItem_Description/User_+_Attach
=== RUN   TestEntryItem_Description/URL_+_Attach
=== RUN   TestEntryItem_Description/Пустая_+_Attach
--- PASS: TestEntryItem_Description (0.00s)
    --- PASS: TestEntryItem_Description/Полная (0.00s)
    --- PASS: TestEntryItem_Description/Только_User (0.00s)
    --- PASS: TestEntryItem_Description/Только_URL (0.00s)
    --- PASS: TestEntryItem_Description/Пустая (0.00s)
    --- PASS: TestEntryItem_Description/User_+_Attach (0.00s)
    --- PASS: TestEntryItem_Description/URL_+_Attach (0.00s)
    --- PASS: TestEntryItem_Description/Пустая_+_Attach (0.00s)
=== RUN   TestEntryItem_FilterValue
=== RUN   TestEntryItem_FilterValue/С_Title
=== RUN   TestEntryItem_FilterValue/Без_Title,_с_Username
=== RUN   TestEntryItem_FilterValue/Пустая_запись_(используется_UUID)
--- PASS: TestEntryItem_FilterValue (0.00s)
    --- PASS: TestEntryItem_FilterValue/С_Title (0.00s)
    --- PASS: TestEntryItem_FilterValue/Без_Title,_с_Username (0.00s)
    --- PASS: TestEntryItem_FilterValue/Пустая_запись_(используется_UUID) (0.00s)
=== RUN   TestPrepareAddScreen
--- PASS: TestPrepareAddScreen (0.00s)
=== RUN   TestCreateEntryFromInputs
2025/04/27 20:25:29 INFO Добавлено вложение к новой записи name=file1.txt binary_id=0
2025/04/27 20:25:29 INFO Добавлено вложение к новой записи name=image.png binary_id=1
--- PASS: TestCreateEntryFromInputs (0.00s)
=== RUN   TestUpdateEntryAddScreen
2025/04/27 20:25:29 INFO Отмена добавления, возврат к списку
2025/04/27 20:25:29 ERROR Не удалось добавить запись в m.db: база данных или Root не инициализированы
2025/04/27 20:25:29 INFO Новая запись добавлена title="New Entry Title"
2025/04/27 20:25:29 INFO Переход к экрану ввода пути для добавления вложения
--- PASS: TestUpdateEntryAddScreen (0.00s)
=== RUN   TestViewEntryAddScreen
=== RUN   TestViewEntryAddScreen/Без_вложений
=== RUN   TestViewEntryAddScreen/С_вложениями
--- PASS: TestViewEntryAddScreen (0.00s)
    --- PASS: TestViewEntryAddScreen/Без_вложений (0.00s)
    --- PASS: TestViewEntryAddScreen/С_вложениями (0.00s)
=== RUN   TestUpdateAttachmentListDeleteScreen
=== RUN   TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_в_режиме_ReadOnly
2025/04/27 20:25:29 WARN Попытка доступа к экрану удаления вложения в режиме Read-Only.
=== RUN   TestUpdateAttachmentListDeleteScreen/Обработка_подтверждения_удаления
2025/04/27 20:25:29 INFO Подтверждено удаление ссылки на вложение name=test.txt id=123
2025/04/27 20:25:29 INFO Ссылка на вложение успешно удалена из редактируемой записи
=== RUN   TestUpdateAttachmentListDeleteScreen/Отмена_подтверждения_удаления
=== RUN   TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_по_ESC
2025/04/27 20:25:29 INFO Отмена удаления вложения, возврат к редактированию
=== RUN   TestUpdateAttachmentListDeleteScreen/Выбор_вложения_для_удаления
=== RUN   TestUpdateAttachmentListDeleteScreen/Выбор_несуществующего_вложения
=== RUN   TestUpdateAttachmentListDeleteScreen/Обработка_неизвестной_клавиши
--- PASS: TestUpdateAttachmentListDeleteScreen (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_в_режиме_ReadOnly (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Обработка_подтверждения_удаления (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Отмена_подтверждения_удаления (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Возврат_к_редактированию_по_ESC (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Выбор_вложения_для_удаления (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Выбор_несуществующего_вложения (0.00s)
    --- PASS: TestUpdateAttachmentListDeleteScreen/Обработка_неизвестной_клавиши (0.00s)
=== RUN   TestPerformAttachmentDelete
=== RUN   TestPerformAttachmentDelete/Успешное_удаление_вложения
2025/04/27 20:25:29 INFO Подтверждено удаление ссылки на вложение name=test.txt id=123
2025/04/27 20:25:29 INFO Ссылка на вложение успешно удалена из редактируемой записи
=== RUN   TestPerformAttachmentDelete/Попытка_удаления_без_выбранного_элемента
2025/04/27 20:25:29 ERROR Попытка удаления без выбранного itemToDelete
=== RUN   TestPerformAttachmentDelete/Вложение_не_найдено_в_записи
2025/04/27 20:25:29 INFO Подтверждено удаление ссылки на вложение name=test.txt id=123
2025/04/27 20:25:29 WARN Не удалось найти BinaryReference для удаления в editingEntry
--- PASS: TestPerformAttachmentDelete (0.00s)
    --- PASS: TestPerformAttachmentDelete/Успешное_удаление_вложения (0.00s)
    --- PASS: TestPerformAttachmentDelete/Попытка_удаления_без_выбранного_элемента (0.00s)
    --- PASS: TestPerformAttachmentDelete/Вложение_не_найдено_в_записи (0.00s)
=== RUN   TestViewAttachmentListDeleteScreen
=== RUN   TestViewAttachmentListDeleteScreen/Отображение_промпта_подтверждения
=== RUN   TestViewAttachmentListDeleteScreen/Отображение_списка_вложений
--- PASS: TestViewAttachmentListDeleteScreen (0.00s)
    --- PASS: TestViewAttachmentListDeleteScreen/Отображение_промпта_подтверждения (0.00s)
    --- PASS: TestViewAttachmentListDeleteScreen/Отображение_списка_вложений (0.00s)
=== RUN   TestUpdateAttachmentPathInputScreen
2025/04/27 20:25:29 INFO Отмена ввода пути вложения
--- PASS: TestUpdateAttachmentPathInputScreen (0.53s)
=== RUN   TestHandleAttachmentPathConfirm
2025/04/27 20:25:29 INFO Попытка добавить вложение из файла path=nonexistent.txt
2025/04/27 20:25:29 ERROR Ошибка чтения файла для вложения path=nonexistent.txt error="open nonexistent.txt: no such file or directory"
2025/04/27 20:25:29 INFO Попытка добавить вложение из файла path=/tmp/test_attachment_2255884774.txt
2025/04/27 20:25:29 INFO Файл успешно прочитан name=test_attachment_2255884774.txt size=20
2025/04/27 20:25:29 INFO Вложение добавлено к редактируемой записи name=test_attachment_2255884774.txt binary_id=0
2025/04/27 20:25:29 INFO Попытка добавить вложение из файла path=/tmp/test_attachment_2255884774.txt
2025/04/27 20:25:29 INFO Файл успешно прочитан name=test_attachment_2255884774.txt size=20
2025/04/27 20:25:29 ERROR Неожиданный предыдущий экран при добавлении вложения state=syncServerScreen
--- PASS: TestHandleAttachmentPathConfirm (0.00s)
=== RUN   TestViewAttachmentPathInputScreen
--- PASS: TestViewAttachmentPathInputScreen (0.00s)
=== RUN   TestMaskCardNumber
=== RUN   TestMaskCardNumber/Short_number
=== RUN   TestMaskCardNumber/Exact_min_length
=== RUN   TestMaskCardNumber/Standard_length
=== RUN   TestMaskCardNumber/Long_number
=== RUN   TestMaskCardNumber/Empty_string
--- PASS: TestMaskCardNumber (0.00s)
    --- PASS: TestMaskCardNumber/Short_number (0.00s)
    --- PASS: TestMaskCardNumber/Exact_min_length (0.00s)
    --- PASS: TestMaskCardNumber/Standard_length (0.00s)
    --- PASS: TestMaskCardNumber/Long_number (0.00s)
    --- PASS: TestMaskCardNumber/Empty_string (0.00s)
=== RUN   TestRenderStandardFields
--- PASS: TestRenderStandardFields (0.00s)
=== RUN   TestRenderCustomFields
--- PASS: TestRenderCustomFields (0.00s)
=== RUN   TestViewEntryDetailScreen
--- PASS: TestViewEntryDetailScreen (0.00s)
=== RUN   TestUpdateEntryDetailScreen
=== RUN   TestUpdateEntryDetailScreen/Переход_к_редактированию_по_'e'
2025/04/27 20:25:29 INFO Переход к редактированию записи title="Detail Test"
=== RUN   TestUpdateEntryDetailScreen/Возврат_к_списку_по_'b'
2025/04/27 20:25:29 INFO Возврат к списку записей
--- PASS: TestUpdateEntryDetailScreen (0.00s)
    --- PASS: TestUpdateEntryDetailScreen/Переход_к_редактированию_по_'e' (0.00s)
    --- PASS: TestUpdateEntryDetailScreen/Возврат_к_списку_по_'b' (0.00s)
=== RUN   TestAttachmentItem_Title
=== RUN   TestAttachmentItem_Title/Обычное_имя_файла
=== RUN   TestAttachmentItem_Title/Пустое_имя
=== RUN   TestAttachmentItem_Title/Имя_с_пробелами
=== RUN   TestAttachmentItem_Title/Специальные_символы
--- PASS: TestAttachmentItem_Title (0.00s)
    --- PASS: TestAttachmentItem_Title/Обычное_имя_файла (0.00s)
    --- PASS: TestAttachmentItem_Title/Пустое_имя (0.00s)
    --- PASS: TestAttachmentItem_Title/Имя_с_пробелами (0.00s)
    --- PASS: TestAttachmentItem_Title/Специальные_символы (0.00s)
=== RUN   TestAttachmentItem_Description
=== RUN   TestAttachmentItem_Description/Положительный_ID
=== RUN   TestAttachmentItem_Description/Нулевой_ID
=== RUN   TestAttachmentItem_Description/Отрицательный_ID
--- PASS: TestAttachmentItem_Description (0.00s)
    --- PASS: TestAttachmentItem_Description/Положительный_ID (0.00s)
    --- PASS: TestAttachmentItem_Description/Нулевой_ID (0.00s)
    --- PASS: TestAttachmentItem_Description/Отрицательный_ID (0.00s)
=== RUN   TestAttachmentItem_FilterValue
=== RUN   TestAttachmentItem_FilterValue/Обычное_имя_файла
=== RUN   TestAttachmentItem_FilterValue/Пустое_имя
=== RUN   TestAttachmentItem_FilterValue/Имя_с_пробелами
--- PASS: TestAttachmentItem_FilterValue (0.00s)
    --- PASS: TestAttachmentItem_FilterValue/Обычное_имя_файла (0.00s)
    --- PASS: TestAttachmentItem_FilterValue/Пустое_имя (0.00s)
    --- PASS: TestAttachmentItem_FilterValue/Имя_с_пробелами (0.00s)
=== RUN   TestPrepareEditScreen
=== RUN   TestPrepareEditScreen/С_выбранной_записью
=== RUN   TestPrepareEditScreen/Без_выбранной_записи
--- PASS: TestPrepareEditScreen (0.00s)
    --- PASS: TestPrepareEditScreen/С_выбранной_записью (0.00s)
    --- PASS: TestPrepareEditScreen/Без_выбранной_записи (0.00s)
=== RUN   TestUpdateEntryEditScreen
=== RUN   TestUpdateEntryEditScreen/Обработка_клавиши_Escape
2025/04/27 20:25:29 INFO Отмена редактирования, возврат к деталям записи
=== RUN   TestUpdateEntryEditScreen/Навигация_с_помощью_Tab
=== RUN   TestUpdateEntryEditScreen/Сохранение_изменений_по_Enter
2025/04/27 20:25:29 INFO Изменения сохранены, возврат к деталям записи
=== RUN   TestUpdateEntryEditScreen/Редактирование_значения_поля
--- PASS: TestUpdateEntryEditScreen (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Обработка_клавиши_Escape (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Навигация_с_помощью_Tab (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Сохранение_изменений_по_Enter (0.00s)
    --- PASS: TestUpdateEntryEditScreen/Редактирование_значения_поля (0.00s)
=== RUN   TestHandleAttachmentDeleteAction
=== RUN   TestHandleAttachmentDeleteAction/С_вложениями_для_удаления
2025/04/27 20:25:29 INFO Переход к экрану удаления вложения
=== RUN   TestHandleAttachmentDeleteAction/Без_вложений
2025/04/27 20:25:29 INFO Нет вложений для удаления
=== RUN   TestHandleAttachmentDeleteAction/editingEntry_is_nil
2025/04/27 20:25:29 INFO Нет вложений для удаления
--- PASS: TestHandleAttachmentDeleteAction (0.00s)
    --- PASS: TestHandleAttachmentDeleteAction/С_вложениями_для_удаления (0.00s)
    --- PASS: TestHandleAttachmentDeleteAction/Без_вложений (0.00s)
    --- PASS: TestHandleAttachmentDeleteAction/editingEntry_is_nil (0.00s)
=== RUN   TestViewEntryEditScreen
    screen_edit_test.go:406: Тест временно отключен из-за проблем с фокусом/отображением
--- SKIP: TestViewEntryEditScreen (0.00s)
=== RUN   TestUpdateEntryListScreen
=== RUN   TestUpdateEntryListScreen/Обработка_dbOpenedMsg
2025/04/27 20:25:29 INFO База KDBX успешно открыта path=""
2025/04/27 20:25:29 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 20:25:29 WARN API клиент не инициализирован (URL не задан), токен не установлен.
=== RUN   TestUpdateEntryListScreen/Навигация_по_списку_(вниз)
2025/04/27 20:25:29 INFO База KDBX успешно открыта path=""
2025/04/27 20:25:29 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 20:25:29 WARN API клиент не инициализирован (URL не задан), токен не установлен.
=== RUN   TestUpdateEntryListScreen/Навигация_по_списку_(вверх)
2025/04/27 20:25:29 INFO База KDBX успешно открыта path=""
2025/04/27 20:25:29 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 20:25:29 WARN API клиент не инициализирован (URL не задан), токен не установлен.
=== RUN   TestUpdateEntryListScreen/Переход_к_деталям_по_Enter
2025/04/27 20:25:29 INFO База KDBX успешно открыта path=""
2025/04/27 20:25:29 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 20:25:29 WARN API клиент не инициализирован (URL не задан), токен не установлен.
2025/04/27 20:25:29 INFO Переход к деталям записи title="Entry 1"
=== RUN   TestUpdateEntryListScreen/Переход_к_добавлению_по_'a'
2025/04/27 20:25:29 INFO База KDBX успешно открыта path=""
2025/04/27 20:25:29 INFO URL сервера не задан и не найден в KDBX.
2025/04/27 20:25:29 WARN API клиент не инициализирован (URL не задан), токен не установлен.
2025/04/27 20:25:29 INFO Переход к добавлению новой записи
--- PASS: TestUpdateEntryListScreen (0.01s)
    --- PASS: TestUpdateEntryListScreen/Обработка_dbOpenedMsg (0.00s)
    --- PASS: TestUpdateEntryListScreen/Навигация_по_списку_(вниз) (0.00s)
    --- PASS: TestUpdateEntryListScreen/Навигация_по_списку_(вверх) (0.00s)
    --- PASS: TestUpdateEntryListScreen/Переход_к_деталям_по_Enter (0.00s)
    --- PASS: TestUpdateEntryListScreen/Переход_к_добавлению_по_'a' (0.00s)
=== RUN   TestHandleAuthLoadError
=== RUN   TestHandleAuthLoadError/URL_не_из_флага
2025/04/27 20:25:29 ERROR Ошибка загрузки Auth данных из KDBX error="test auth load error"
=== RUN   TestHandleAuthLoadError/URL_из_флага
2025/04/27 20:25:29 ERROR Ошибка загрузки Auth данных из KDBX error="test auth load error"
--- PASS: TestHandleAuthLoadError (0.00s)
    --- PASS: TestHandleAuthLoadError/URL_не_из_флага (0.00s)
    --- PASS: TestHandleAuthLoadError/URL_из_флага (0.00s)
=== RUN   TestHandleAuthLoadSuccess
=== RUN   TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_и_токен_загружены
2025/04/27 20:25:29 INFO URL сервера загружен из KDBX, создан API клиент url=http://loaded.url token_found=true
=== RUN   TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_пустой,_токен_загружен
2025/04/27 20:25:29 INFO URL сервера не задан и не найден в KDBX.
=== RUN   TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_загружен,_токен_пустой
2025/04/27 20:25:29 INFO URL сервера загружен из KDBX, создан API клиент url=http://loaded.url token_found=false
=== RUN   TestHandleAuthLoadSuccess/URL_из_флага,_токен_загружен
2025/04/27 20:25:29 INFO URL сервера задан флагом, загружен только токен из KDBX token_found=true
=== RUN   TestHandleAuthLoadSuccess/URL_из_флага,_токен_пустой
2025/04/27 20:25:29 INFO URL сервера задан флагом, загружен только токен из KDBX token_found=false
--- PASS: TestHandleAuthLoadSuccess (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_и_токен_загружены (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_пустой,_токен_загружен (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_не_из_флага,_URL_загружен,_токен_пустой (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_из_флага,_токен_загружен (0.00s)
    --- PASS: TestHandleAuthLoadSuccess/URL_из_флага,_токен_пустой (0.00s)
=== RUN   TestUpdateLoginRegisterChoiceScreen
    screen_login_register_choice_test.go:15: Значения констант - syncServerScreen: 9, loginRegisterChoiceScreen: 11
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации_ВерхнийРегистр
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода
=== RUN   TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода_ВерхнийРегистр
=== RUN   TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей
=== RUN   TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей_Backspace
=== RUN   TestUpdateLoginRegisterChoiceScreen/ИгнорированиеДругихКлавиш
--- PASS: TestUpdateLoginRegisterChoiceScreen (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранРегистрации_ВерхнийРегистр (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ПереходНаЭкранВхода_ВерхнийРегистр (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ВозвратНаСписокЗаписей_Backspace (0.00s)
    --- PASS: TestUpdateLoginRegisterChoiceScreen/ИгнорированиеДругихКлавиш (0.00s)
=== RUN   TestViewLoginRegisterChoiceScreen
--- PASS: TestViewLoginRegisterChoiceScreen (0.00s)
=== RUN   TestUpdateLoginScreen
=== RUN   TestUpdateLoginScreen/ПереключениеПоляВперед
=== RUN   TestUpdateLoginScreen/ПереключениеПоляНазад
=== RUN   TestUpdateLoginScreen/ОтменаВхода
=== RUN   TestUpdateLoginScreen/НажатиеEnter_ПервоеПоле
=== RUN   TestUpdateLoginScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы
--- PASS: TestUpdateLoginScreen (0.00s)
    --- PASS: TestUpdateLoginScreen/ПереключениеПоляВперед (0.00s)
    --- PASS: TestUpdateLoginScreen/ПереключениеПоляНазад (0.00s)
    --- PASS: TestUpdateLoginScreen/ОтменаВхода (0.00s)
    --- PASS: TestUpdateLoginScreen/НажатиеEnter_ПервоеПоле (0.00s)
    --- PASS: TestUpdateLoginScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы (0.00s)
=== RUN   TestViewLoginScreen
--- PASS: TestViewLoginScreen (0.00s)
=== RUN   TestLoginWithScreenTestSuite
    screen_login_test.go:144: Требуется полностью переработать тесты для модели входа/авторизации
--- SKIP: TestLoginWithScreenTestSuite (0.00s)
=== RUN   TestViewNewKdbxPasswordScreen
=== RUN   TestViewNewKdbxPasswordScreen/Базовое_отображение_(фокус_на_первом_поле)
=== RUN   TestViewNewKdbxPasswordScreen/Отображение_с_фокусом_на_втором_поле
=== RUN   TestViewNewKdbxPasswordScreen/Отображение_с_ошибкой_совпадения_паролей
--- PASS: TestViewNewKdbxPasswordScreen (0.00s)
    --- PASS: TestViewNewKdbxPasswordScreen/Базовое_отображение_(фокус_на_первом_поле) (0.00s)
    --- PASS: TestViewNewKdbxPasswordScreen/Отображение_с_фокусом_на_втором_поле (0.00s)
    --- PASS: TestViewNewKdbxPasswordScreen/Отображение_с_ошибкой_совпадения_паролей (0.00s)
=== RUN   TestUpdateNewKdbxPasswordScreen
=== RUN   TestUpdateNewKdbxPasswordScreen/Выход_по_Esc
=== RUN   TestUpdateNewKdbxPasswordScreen/Выход_по_Ctrl+C
=== RUN   TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Tab/Down
=== RUN   TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Shift+Tab/Up
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(пустой_пароль)
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(непустой_пароль)
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(пароли_не_совпадают)
=== RUN   TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(успешное_создание)
2025/04/27 20:25:29 INFO Пароли совпадают, создаем новую базу KDBX path=/tmp/TestUpdateNewKdbxPasswordScreenEnter_на_втором_поле_(успешное_создание)3268040744/001/test_new.kdbx
2025/04/27 20:25:29 INFO Новый файл KDBX успешно создан и сохранен path=/tmp/TestUpdateNewKdbxPasswordScreenEnter_на_втором_поле_(успешное_создание)3268040744/001/test_new.kdbx
=== RUN   TestUpdateNewKdbxPasswordScreen/Ввод_символов_в_активное_поле
--- PASS: TestUpdateNewKdbxPasswordScreen (0.01s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Выход_по_Esc (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Выход_по_Ctrl+C (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Tab/Down (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Переключение_фокуса_Shift+Tab/Up (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(пустой_пароль) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_первом_поле_(непустой_пароль) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(пароли_не_совпадают) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Enter_на_втором_поле_(успешное_создание) (0.00s)
    --- PASS: TestUpdateNewKdbxPasswordScreen/Ввод_символов_в_активное_поле (0.00s)
=== RUN   TestPasswordInputScreen
=== RUN   TestPasswordInputScreen/ОтрисовкаЭкрана
=== RUN   TestPasswordInputScreen/ОтображениеОшибки
=== RUN   TestPasswordInputScreen/ВводПароляИОтправкаКоманды
=== RUN   TestPasswordInputScreen/ОбработкаErrMsg
=== RUN   TestPasswordInputScreen/ОчисткаОшибкиПриНажатииКлавиши
--- PASS: TestPasswordInputScreen (0.00s)
    --- PASS: TestPasswordInputScreen/ОтрисовкаЭкрана (0.00s)
    --- PASS: TestPasswordInputScreen/ОтображениеОшибки (0.00s)
    --- PASS: TestPasswordInputScreen/ВводПароляИОтправкаКоманды (0.00s)
    --- PASS: TestPasswordInputScreen/ОбработкаErrMsg (0.00s)
    --- PASS: TestPasswordInputScreen/ОчисткаОшибкиПриНажатииКлавиши (0.00s)
=== RUN   TestUpdateRegisterScreen
=== RUN   TestUpdateRegisterScreen/ПереключениеПоляВперед
=== RUN   TestUpdateRegisterScreen/ПереключениеПоляНазад
=== RUN   TestUpdateRegisterScreen/ОтменаРегистрации
=== RUN   TestUpdateRegisterScreen/НажатиеEnter_ПервоеПоле
=== RUN   TestUpdateRegisterScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы
--- PASS: TestUpdateRegisterScreen (0.00s)
    --- PASS: TestUpdateRegisterScreen/ПереключениеПоляВперед (0.00s)
    --- PASS: TestUpdateRegisterScreen/ПереключениеПоляНазад (0.00s)
    --- PASS: TestUpdateRegisterScreen/ОтменаРегистрации (0.00s)
    --- PASS: TestUpdateRegisterScreen/НажатиеEnter_ПервоеПоле (0.00s)
    --- PASS: TestUpdateRegisterScreen/НажатиеEnter_ВтороеПоле_ОтправкаФормы (0.00s)
=== RUN   TestViewRegisterScreen
--- PASS: TestViewRegisterScreen (0.00s)
=== RUN   TestUpdateServerURLInputScreen
=== RUN   TestUpdateServerURLInputScreen/ОтменаВводаURL
=== RUN   TestUpdateServerURLInputScreen/ПодтверждениеВводаURL
2025/04/27 20:25:29 INFO URL сервера обновлен url=https://new.server
=== RUN   TestUpdateServerURLInputScreen/ИспользованиеПлейсхолдера
2025/04/27 20:25:29 INFO URL сервера обновлен url=https://default.server
=== RUN   TestUpdateServerURLInputScreen/ОбновлениеПоляВвода
--- PASS: TestUpdateServerURLInputScreen (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ОтменаВводаURL (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ПодтверждениеВводаURL (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ИспользованиеПлейсхолдера (0.00s)
    --- PASS: TestUpdateServerURLInputScreen/ОбновлениеПоляВвода (0.00s)
=== RUN   TestViewServerURLInputScreen
--- PASS: TestViewServerURLInputScreen (0.00s)
=== RUN   TestDirectServerURLInputScreen
=== RUN   TestDirectServerURLInputScreen/ОтменаВвода
=== RUN   TestDirectServerURLInputScreen/ПодтверждениеПустогоВвода
2025/04/27 20:25:29 INFO URL сервера обновлен url=https://default.server
--- PASS: TestDirectServerURLInputScreen (0.00s)
    --- PASS: TestDirectServerURLInputScreen/ОтменаВвода (0.00s)
    --- PASS: TestDirectServerURLInputScreen/ПодтверждениеПустогоВвода (0.00s)
=== RUN   TestSyncMenuItem_Title
=== RUN   TestSyncMenuItem_Title/Настройка_URL
=== RUN   TestSyncMenuItem_Title/Вход/Регистрация
=== RUN   TestSyncMenuItem_Title/Синхронизировать
=== RUN   TestSyncMenuItem_Title/Просмотр_версий
=== RUN   TestSyncMenuItem_Title/Выход
=== RUN   TestSyncMenuItem_Title/Пустой_заголовок
--- PASS: TestSyncMenuItem_Title (0.00s)
    --- PASS: TestSyncMenuItem_Title/Настройка_URL (0.00s)
    --- PASS: TestSyncMenuItem_Title/Вход/Регистрация (0.00s)
    --- PASS: TestSyncMenuItem_Title/Синхронизировать (0.00s)
    --- PASS: TestSyncMenuItem_Title/Просмотр_версий (0.00s)
    --- PASS: TestSyncMenuItem_Title/Выход (0.00s)
    --- PASS: TestSyncMenuItem_Title/Пустой_заголовок (0.00s)
=== RUN   TestSyncMenuItem_Description
--- PASS: TestSyncMenuItem_Description (0.00s)
=== RUN   TestSyncMenuItem_FilterValue
=== RUN   TestSyncMenuItem_FilterValue/Настройка_URL
=== RUN   TestSyncMenuItem_FilterValue/Пустой_заголовок
--- PASS: TestSyncMenuItem_FilterValue (0.00s)
    --- PASS: TestSyncMenuItem_FilterValue/Настройка_URL (0.00s)
    --- PASS: TestSyncMenuItem_FilterValue/Пустой_заголовок (0.00s)
=== RUN   TestViewSyncServerScreen
--- PASS: TestViewSyncServerScreen (0.00s)
=== RUN   TestHandleSyncMenuConfigureURL
=== RUN   TestHandleSyncMenuConfigureURL/URL_не_задан
=== RUN   TestHandleSyncMenuConfigureURL/URL_задан
--- PASS: TestHandleSyncMenuConfigureURL (0.00s)
    --- PASS: TestHandleSyncMenuConfigureURL/URL_не_задан (0.00s)
    --- PASS: TestHandleSyncMenuConfigureURL/URL_задан (0.00s)
=== RUN   TestHandleSyncMenuLoginRegister
=== RUN   TestHandleSyncMenuLoginRegister/URL_настроен
=== RUN   TestHandleSyncMenuLoginRegister/URL_не_настроен
--- PASS: TestHandleSyncMenuLoginRegister (0.00s)
    --- PASS: TestHandleSyncMenuLoginRegister/URL_настроен (0.00s)
    --- PASS: TestHandleSyncMenuLoginRegister/URL_не_настроен (0.00s)
=== RUN   TestHandleSyncMenuSyncNow
=== RUN   TestHandleSyncMenuSyncNow/Авторизован,_запуск_синхронизации
2025/04/27 20:25:29 INFO Запуск проверки предусловий для синхронизации...
2025/04/27 20:25:29 INFO Предусловия синхронизации выполнены.
=== RUN   TestHandleSyncMenuSyncNow/Не_авторизован,_ошибка
--- PASS: TestHandleSyncMenuSyncNow (0.00s)
    --- PASS: TestHandleSyncMenuSyncNow/Авторизован,_запуск_синхронизации (0.00s)
    --- PASS: TestHandleSyncMenuSyncNow/Не_авторизован,_ошибка (0.00s)
=== RUN   TestHandleSyncMenuViewVersions
=== RUN   TestHandleSyncMenuViewVersions/Авторизован,_переход_к_просмотру_версий
2025/04/27 20:25:29 INFO Список версий успешно загружен count=0 current_id=0
=== RUN   TestHandleSyncMenuViewVersions/Не_авторизован,_ошибка
--- PASS: TestHandleSyncMenuViewVersions (0.00s)
    --- PASS: TestHandleSyncMenuViewVersions/Авторизован,_переход_к_просмотру_версий (0.00s)
    --- PASS: TestHandleSyncMenuViewVersions/Не_авторизован,_ошибка (0.00s)
=== RUN   TestHandleSyncMenuLogout
=== RUN   TestHandleSyncMenuLogout/Авторизован,_DB_установлена,_успешный_выход
2025/04/27 20:25:29 INFO Локальный токен очищен и сохранен в KDBX.
2025/04/27 20:25:29 INFO Выполнен выход token_existed=true
=== RUN   TestHandleSyncMenuLogout/Авторизован,_DB_не_установлена,_выход_локально
2025/04/27 20:25:29 WARN Не удалось сохранить пустой токен в KDBX при выходе: база не загружена.
2025/04/27 20:25:29 INFO Выполнен выход token_existed=true
=== RUN   TestHandleSyncMenuLogout/Не_авторизован,_сообщение_об_ошибке
--- PASS: TestHandleSyncMenuLogout (0.00s)
    --- PASS: TestHandleSyncMenuLogout/Авторизован,_DB_установлена,_успешный_выход (0.00s)
    --- PASS: TestHandleSyncMenuLogout/Авторизован,_DB_не_установлена,_выход_локально (0.00s)
    --- PASS: TestHandleSyncMenuLogout/Не_авторизован,_сообщение_об_ошибке (0.00s)
=== RUN   TestHandleSyncMenuAction
=== RUN   TestHandleSyncMenuAction/configure_url
=== RUN   TestHandleSyncMenuAction/login_register
=== RUN   TestHandleSyncMenuAction/sync_now
=== RUN   TestHandleSyncMenuAction/view_versions
=== RUN   TestHandleSyncMenuAction/logout
2025/04/27 20:25:29 INFO Локальный токен очищен и сохранен в KDBX.
2025/04/27 20:25:29 INFO Выполнен выход token_existed=true
=== RUN   TestHandleSyncMenuAction/NoItemSelected
=== RUN   TestHandleSyncMenuAction/InvalidItemType
--- PASS: TestHandleSyncMenuAction (0.01s)
    --- PASS: TestHandleSyncMenuAction/configure_url (0.00s)
    --- PASS: TestHandleSyncMenuAction/login_register (0.00s)
    --- PASS: TestHandleSyncMenuAction/sync_now (0.00s)
    --- PASS: TestHandleSyncMenuAction/view_versions (0.00s)
    --- PASS: TestHandleSyncMenuAction/logout (0.00s)
    --- PASS: TestHandleSyncMenuAction/NoItemSelected (0.00s)
    --- PASS: TestHandleSyncMenuAction/InvalidItemType (0.00s)
=== RUN   TestUpdateSyncServerScreen
=== RUN   TestUpdateSyncServerScreen/Press_Enter_(select_Login)
=== RUN   TestUpdateSyncServerScreen/Press_Esc
=== RUN   TestUpdateSyncServerScreen/Press_Backspace_(mapped_to_Back)
=== RUN   TestUpdateSyncServerScreen/Press_Down_arrow
=== RUN   TestUpdateSyncServerScreen/Other_message_(WindowSize)
--- PASS: TestUpdateSyncServerScreen (0.01s)
    --- PASS: TestUpdateSyncServerScreen/Press_Enter_(select_Login) (0.00s)
    --- PASS: TestUpdateSyncServerScreen/Press_Esc (0.00s)
    --- PASS: TestUpdateSyncServerScreen/Press_Backspace_(mapped_to_Back) (0.00s)
    --- PASS: TestUpdateSyncServerScreen/Press_Down_arrow (0.00s)
    --- PASS: TestUpdateSyncServerScreen/Other_message_(WindowSize) (0.00s)
=== RUN   TestScreenTestMockAPIClient_Login
=== RUN   TestScreenTestMockAPIClient_Login/Success
=== RUN   TestScreenTestMockAPIClient_Login/Error
--- PASS: TestScreenTestMockAPIClient_Login (0.00s)
    --- PASS: TestScreenTestMockAPIClient_Login/Success (0.00s)
    --- PASS: TestScreenTestMockAPIClient_Login/Error (0.00s)
=== RUN   TestScreenTestMockAPIClient_Register
=== RUN   TestScreenTestMockAPIClient_Register/Success
=== RUN   TestScreenTestMockAPIClient_Register/Error
--- PASS: TestScreenTestMockAPIClient_Register (0.00s)
    --- PASS: TestScreenTestMockAPIClient_Register/Success (0.00s)
    --- PASS: TestScreenTestMockAPIClient_Register/Error (0.00s)
=== RUN   TestScreenTestMockAPIClient_GetVaultMetadata
=== RUN   TestScreenTestMockAPIClient_GetVaultMetadata/Success
=== RUN   TestScreenTestMockAPIClient_GetVaultMetadata/Error
--- PASS: TestScreenTestMockAPIClient_GetVaultMetadata (0.00s)
    --- PASS: TestScreenTestMockAPIClient_GetVaultMetadata/Success (0.00s)
    --- PASS: TestScreenTestMockAPIClient_GetVaultMetadata/Error (0.00s)
=== RUN   TestScreenTestMockAPIClient_UploadVault
=== RUN   TestScreenTestMockAPIClient_UploadVault/Success
=== RUN   TestScreenTestMockAPIClient_UploadVault/Error
--- PASS: TestScreenTestMockAPIClient_UploadVault (0.00s)
    --- PASS: TestScreenTestMockAPIClient_UploadVault/Success (0.00s)
    --- PASS: TestScreenTestMockAPIClient_UploadVault/Error (0.00s)
=== RUN   TestScreenTestMockAPIClient_DownloadVault
=== RUN   TestScreenTestMockAPIClient_DownloadVault/Success
=== RUN   TestScreenTestMockAPIClient_DownloadVault/Error
=== RUN   TestScreenTestMockAPIClient_DownloadVault/SuccessOnlyReader
--- PASS: TestScreenTestMockAPIClient_DownloadVault (0.00s)
    --- PASS: TestScreenTestMockAPIClient_DownloadVault/Success (0.00s)
    --- PASS: TestScreenTestMockAPIClient_DownloadVault/Error (0.00s)
    --- PASS: TestScreenTestMockAPIClient_DownloadVault/SuccessOnlyReader (0.00s)
=== RUN   TestScreenTestMockAPIClient_ListVersions
=== RUN   TestScreenTestMockAPIClient_ListVersions/Success
=== RUN   TestScreenTestMockAPIClient_ListVersions/Error
--- PASS: TestScreenTestMockAPIClient_ListVersions (0.00s)
    --- PASS: TestScreenTestMockAPIClient_ListVersions/Success (0.00s)
    --- PASS: TestScreenTestMockAPIClient_ListVersions/Error (0.00s)
=== RUN   TestScreenTestMockAPIClient_RollbackToVersion
=== RUN   TestScreenTestMockAPIClient_RollbackToVersion/Success
=== RUN   TestScreenTestMockAPIClient_RollbackToVersion/Error
--- PASS: TestScreenTestMockAPIClient_RollbackToVersion (0.00s)
    --- PASS: TestScreenTestMockAPIClient_RollbackToVersion/Success (0.00s)
    --- PASS: TestScreenTestMockAPIClient_RollbackToVersion/Error (0.00s)
=== RUN   TestScreenTestMockAPIClient_SetAuthToken
--- PASS: TestScreenTestMockAPIClient_SetAuthToken (0.00s)
=== RUN   TestScreenTestSuite_BuilderMethods
=== RUN   TestScreenTestSuite_BuilderMethods/WithServerURL
=== RUN   TestScreenTestSuite_BuilderMethods/WithAuthToken
=== RUN   TestScreenTestSuite_BuilderMethods/WithDatabase
--- PASS: TestScreenTestSuite_BuilderMethods (0.00s)
    --- PASS: TestScreenTestSuite_BuilderMethods/WithServerURL (0.00s)
    --- PASS: TestScreenTestSuite_BuilderMethods/WithAuthToken (0.00s)
    --- PASS: TestScreenTestSuite_BuilderMethods/WithDatabase (0.00s)
=== RUN   TestScreenTestSuite_AssertViewContains
--- PASS: TestScreenTestSuite_AssertViewContains (0.00s)
=== RUN   TestScreenTestSuite_CaptureView
=== RUN   TestScreenTestSuite_CaptureView/With_Command
=== RUN   TestScreenTestSuite_CaptureView/With_Nil_Command
--- PASS: TestScreenTestSuite_CaptureView (0.00s)
    --- PASS: TestScreenTestSuite_CaptureView/With_Command (0.00s)
    --- PASS: TestScreenTestSuite_CaptureView/With_Nil_Command (0.00s)
=== RUN   TestScreenTestSuite_CaptureOutput
=== RUN   TestScreenTestSuite_CaptureOutput/Sequence_of_Commands
=== RUN   TestScreenTestSuite_CaptureOutput/With_Nil_Commands
=== RUN   TestScreenTestSuite_CaptureOutput/No_Commands
--- PASS: TestScreenTestSuite_CaptureOutput (0.00s)
    --- PASS: TestScreenTestSuite_CaptureOutput/Sequence_of_Commands (0.00s)
    --- PASS: TestScreenTestSuite_CaptureOutput/With_Nil_Commands (0.00s)
    --- PASS: TestScreenTestSuite_CaptureOutput/No_Commands (0.00s)
=== RUN   TestScreenTestSuite_SetupMockAPILogin
=== RUN   TestScreenTestSuite_SetupMockAPILogin/Success_Case
=== RUN   TestScreenTestSuite_SetupMockAPILogin/Error_Case
--- PASS: TestScreenTestSuite_SetupMockAPILogin (0.00s)
    --- PASS: TestScreenTestSuite_SetupMockAPILogin/Success_Case (0.00s)
    --- PASS: TestScreenTestSuite_SetupMockAPILogin/Error_Case (0.00s)
=== RUN   TestScreenTestSuite_SetupMockAPIRegister
=== RUN   TestScreenTestSuite_SetupMockAPIRegister/Success_Case
=== RUN   TestScreenTestSuite_SetupMockAPIRegister/Error_Case
--- PASS: TestScreenTestSuite_SetupMockAPIRegister (0.00s)
    --- PASS: TestScreenTestSuite_SetupMockAPIRegister/Success_Case (0.00s)
    --- PASS: TestScreenTestSuite_SetupMockAPIRegister/Error_Case (0.00s)
=== RUN   TestScreenTestSuite_RenderScreen
--- PASS: TestScreenTestSuite_RenderScreen (0.00s)
=== RUN   TestHandleVersionRollbackConfirm
=== RUN   TestHandleVersionRollbackConfirm/Press_Enter_to_Confirm
2025/04/27 20:25:29 INFO Успешный откат к версии version_id=123
=== RUN   TestHandleVersionRollbackConfirm/Press_Escape_to_Cancel
=== RUN   TestHandleVersionRollbackConfirm/Press_Backspace_to_Cancel
=== RUN   TestHandleVersionRollbackConfirm/Press_Other_Key
=== RUN   TestHandleVersionRollbackConfirm/Press_Enter_with_nil_selectedVersion
--- PASS: TestHandleVersionRollbackConfirm (0.00s)
    --- PASS: TestHandleVersionRollbackConfirm/Press_Enter_to_Confirm (0.00s)
    --- PASS: TestHandleVersionRollbackConfirm/Press_Escape_to_Cancel (0.00s)
    --- PASS: TestHandleVersionRollbackConfirm/Press_Backspace_to_Cancel (0.00s)
    --- PASS: TestHandleVersionRollbackConfirm/Press_Other_Key (0.00s)
    --- PASS: TestHandleVersionRollbackConfirm/Press_Enter_with_nil_selectedVersion (0.00s)
=== RUN   TestHandleVersionRollbackError
=== RUN   TestHandleVersionRollbackError/Press_Escape_to_clear_error
=== RUN   TestHandleVersionRollbackError/Press_Backspace_to_clear_error
=== RUN   TestHandleVersionRollbackError/Press_Enter_to_clear_error
=== RUN   TestHandleVersionRollbackError/Press_Other_Key_should_not_clear_error
--- PASS: TestHandleVersionRollbackError (0.00s)
    --- PASS: TestHandleVersionRollbackError/Press_Escape_to_clear_error (0.00s)
    --- PASS: TestHandleVersionRollbackError/Press_Backspace_to_clear_error (0.00s)
    --- PASS: TestHandleVersionRollbackError/Press_Enter_to_clear_error (0.00s)
    --- PASS: TestHandleVersionRollbackError/Press_Other_Key_should_not_clear_error (0.00s)
=== RUN   TestHandleVersionListKeys
=== RUN   TestHandleVersionListKeys/Press_Enter_on_non-current_version
=== RUN   TestHandleVersionListKeys/Press_Enter_on_current_version
=== RUN   TestHandleVersionListKeys/Press_Escape
=== RUN   TestHandleVersionListKeys/Press_Backspace
=== RUN   TestHandleVersionListKeys/Press_r_to_refresh
2025/04/27 20:25:31 INFO Список версий успешно загружен count=0 current_id=0
=== RUN   TestHandleVersionListKeys/Press_l_to_login/register
=== RUN   TestHandleVersionListKeys/Press_Other_Key
--- PASS: TestHandleVersionListKeys (2.01s)
    --- PASS: TestHandleVersionListKeys/Press_Enter_on_non-current_version (0.00s)
    --- PASS: TestHandleVersionListKeys/Press_Enter_on_current_version (2.00s)
    --- PASS: TestHandleVersionListKeys/Press_Escape (0.00s)
    --- PASS: TestHandleVersionListKeys/Press_Backspace (0.00s)
    --- PASS: TestHandleVersionListKeys/Press_r_to_refresh (0.00s)
    --- PASS: TestHandleVersionListKeys/Press_l_to_login/register (0.00s)
    --- PASS: TestHandleVersionListKeys/Press_Other_Key (0.00s)
=== RUN   TestViewVersionListScreen
=== RUN   TestViewVersionListScreen/View_when_loading
=== RUN   TestViewVersionListScreen/View_when_confirming_rollback
=== RUN   TestViewVersionListScreen/View_when_rollback_error_occurred
=== RUN   TestViewVersionListScreen/View_when_version_history_is_empty
=== RUN   TestViewVersionListScreen/View_with_version_list
--- PASS: TestViewVersionListScreen (0.00s)
    --- PASS: TestViewVersionListScreen/View_when_loading (0.00s)
    --- PASS: TestViewVersionListScreen/View_when_confirming_rollback (0.00s)
    --- PASS: TestViewVersionListScreen/View_when_rollback_error_occurred (0.00s)
    --- PASS: TestViewVersionListScreen/View_when_version_history_is_empty (0.00s)
    --- PASS: TestViewVersionListScreen/View_with_version_list (0.00s)
=== RUN   TestUpdateVersionListScreen
=== RUN   TestUpdateVersionListScreen/KeyMsg_when_confirming_rollback
=== RUN   TestUpdateVersionListScreen/KeyMsg_when_rollback_error_exists
=== RUN   TestUpdateVersionListScreen/KeyMsg_handled_by_handleVersionListKeys
=== RUN   TestUpdateVersionListScreen/KeyMsg_passed_to_list_update
    screen_version_test.go:516: Skipping test due to issues with list.Update in test environment
=== RUN   TestUpdateVersionListScreen/Non-KeyMsg_passed_to_list_update
    screen_version_test.go:559: Skipping test due to issues with list.Update in test environment
--- PASS: TestUpdateVersionListScreen (0.00s)
    --- PASS: TestUpdateVersionListScreen/KeyMsg_when_confirming_rollback (0.00s)
    --- PASS: TestUpdateVersionListScreen/KeyMsg_when_rollback_error_exists (0.00s)
    --- PASS: TestUpdateVersionListScreen/KeyMsg_handled_by_handleVersionListKeys (0.00s)
    --- SKIP: TestUpdateVersionListScreen/KeyMsg_passed_to_list_update (0.00s)
    --- SKIP: TestUpdateVersionListScreen/Non-KeyMsg_passed_to_list_update (0.00s)
=== RUN   TestHandleVersionMessages
=== RUN   TestHandleVersionMessages/handleVersionsLoadedMsg_-_Success
    screen_version_test.go:605: Пропускаем тест из-за нерешенной проблемы с проверкой BatchMsg
=== RUN   TestHandleVersionMessages/handleVersionsLoadedMsg_-_Current_ID_from_serverMeta
2025/04/27 20:25:31 WARN currentVersionID из API = 0, используем ID из serverMeta serverMeta.ID=1
=== RUN   TestHandleVersionMessages/handleVersionsLoadErrorMsg_-_Authorization_Error
=== RUN   TestHandleVersionMessages/handleVersionsLoadErrorMsg_-_Generic_Error
--- PASS: TestHandleVersionMessages (4.01s)
    --- SKIP: TestHandleVersionMessages/handleVersionsLoadedMsg_-_Success (0.00s)
    --- PASS: TestHandleVersionMessages/handleVersionsLoadedMsg_-_Current_ID_from_serverMeta (0.00s)
    --- PASS: TestHandleVersionMessages/handleVersionsLoadErrorMsg_-_Authorization_Error (2.00s)
    --- PASS: TestHandleVersionMessages/handleVersionsLoadErrorMsg_-_Generic_Error (2.00s)
=== RUN   TestHandleRollbackSuccessMsg
2025/04/27 20:25:37 INFO Запуск скачивания KDBX с сервера...
2025/04/27 20:25:37 ERROR Ошибка скачивания KDBX с сервера error="неверный тип результата io.ReadCloser"
--- PASS: TestHandleRollbackSuccessMsg (2.00s)
=== RUN   TestHandleRollbackErrorMsg
=== RUN   TestHandleRollbackErrorMsg/Authorization_Error
=== RUN   TestHandleRollbackErrorMsg/Generic_Error
--- PASS: TestHandleRollbackErrorMsg (2.00s)
    --- PASS: TestHandleRollbackErrorMsg/Authorization_Error (2.00s)
    --- PASS: TestHandleRollbackErrorMsg/Generic_Error (0.00s)
=== RUN   TestWelcomeScreen
=== RUN   TestWelcomeScreen/ОтрисовкаЭкрана
=== RUN   TestWelcomeScreen/ПереходПриНажатииEnter
=== RUN   TestWelcomeScreen/ВыходПриНажатииQ
--- PASS: TestWelcomeScreen (0.00s)
    --- PASS: TestWelcomeScreen/ОтрисовкаЭкрана (0.00s)
    --- PASS: TestWelcomeScreen/ПереходПриНажатииEnter (0.00s)
    --- PASS: TestWelcomeScreen/ВыходПриНажатииQ (0.00s)
=== RUN   TestHandleDBSavedMsg
--- PASS: TestHandleDBSavedMsg (0.00s)
=== RUN   TestHandleDBSaveErrorMsg
--- PASS: TestHandleDBSaveErrorMsg (0.00s)
=== RUN   TestHandleClearStatusMsg
--- PASS: TestHandleClearStatusMsg (0.00s)
=== RUN   TestHandleSyncErrorMsg
=== RUN   TestHandleSyncErrorMsg/ОбычнаяОшибка
=== RUN   TestHandleSyncErrorMsg/ОшибкаАвторизации
--- PASS: TestHandleSyncErrorMsg (0.00s)
    --- PASS: TestHandleSyncErrorMsg/ОбычнаяОшибка (0.00s)
    --- PASS: TestHandleSyncErrorMsg/ОшибкаАвторизации (0.00s)
=== RUN   TestHandleSyncStartedMsg
--- PASS: TestHandleSyncStartedMsg (0.00s)
=== RUN   TestHandleServerMetadataMsg
=== RUN   TestHandleServerMetadataMsg/Не_в_состоянии_синхронизации
=== RUN   TestHandleServerMetadataMsg/В_состоянии_синхронизации,_локальные_метаданные_не_получены
=== RUN   TestHandleServerMetadataMsg/В_состоянии_синхронизации,_локальные_метаданные_уже_получены
2025/04/27 20:25:39 INFO Получены метаданные сервера и локального файла. Запуск сравнения...
2025/04/27 20:25:39 INFO Версии идентичны. Синхронизация не требуется.
--- PASS: TestHandleServerMetadataMsg (0.00s)
    --- PASS: TestHandleServerMetadataMsg/Не_в_состоянии_синхронизации (0.00s)
    --- PASS: TestHandleServerMetadataMsg/В_состоянии_синхронизации,_локальные_метаданные_не_получены (0.00s)
    --- PASS: TestHandleServerMetadataMsg/В_состоянии_синхронизации,_локальные_метаданные_уже_получены (0.00s)
=== RUN   TestHandleLocalMetadataMsg
=== RUN   TestHandleLocalMetadataMsg/Не_в_состоянии_синхронизации
=== RUN   TestHandleLocalMetadataMsg/В_состоянии_синхронизации,_метаданные_сервера_не_получены
=== RUN   TestHandleLocalMetadataMsg/В_состоянии_синхронизации,_метаданные_сервера_уже_получены
2025/04/27 20:25:39 INFO Получены метаданные сервера и локального файла. Запуск сравнения...
2025/04/27 20:25:39 INFO Локальная версия новее. Загрузка на сервер.
--- PASS: TestHandleLocalMetadataMsg (0.00s)
    --- PASS: TestHandleLocalMetadataMsg/Не_в_состоянии_синхронизации (0.00s)
    --- PASS: TestHandleLocalMetadataMsg/В_состоянии_синхронизации,_метаданные_сервера_не_получены (0.00s)
    --- PASS: TestHandleLocalMetadataMsg/В_состоянии_синхронизации,_метаданные_сервера_уже_получены (0.00s)
=== RUN   TestHandleSyncUploadSuccessMsg
--- PASS: TestHandleSyncUploadSuccessMsg (0.00s)
=== RUN   TestHandleVersionMsg
=== RUN   TestHandleVersionMsg/versionsLoadedMsg
=== RUN   TestHandleVersionMsg/versionsLoadErrorMsg
=== RUN   TestHandleVersionMsg/rollbackSuccessMsg
=== RUN   TestHandleVersionMsg/rollbackErrorMsg
=== RUN   TestHandleVersionMsg/НеизвестноеСообщение
--- PASS: TestHandleVersionMsg (0.00s)
    --- PASS: TestHandleVersionMsg/versionsLoadedMsg (0.00s)
    --- PASS: TestHandleVersionMsg/versionsLoadErrorMsg (0.00s)
    --- PASS: TestHandleVersionMsg/rollbackSuccessMsg (0.00s)
    --- PASS: TestHandleVersionMsg/rollbackErrorMsg (0.00s)
    --- PASS: TestHandleVersionMsg/НеизвестноеСообщение (0.00s)
=== RUN   TestHandleSyncDownloadSuccessMsg
=== RUN   TestHandleSyncDownloadSuccessMsg/Без_перезагрузки
=== RUN   TestHandleSyncDownloadSuccessMsg/С_перезагрузкой
--- PASS: TestHandleSyncDownloadSuccessMsg (2.00s)
    --- PASS: TestHandleSyncDownloadSuccessMsg/Без_перезагрузки (2.00s)
    --- PASS: TestHandleSyncDownloadSuccessMsg/С_перезагрузкой (0.00s)
=== RUN   TestCanSave
=== RUN   TestCanSave/РазрешеноСохранение
=== RUN   TestCanSave/РежимТолькоЧтение
=== RUN   TestCanSave/НетБазыДанных
=== RUN   TestCanSave/НеподходящееСостояние
--- PASS: TestCanSave (0.00s)
    --- PASS: TestCanSave/РазрешеноСохранение (0.00s)
    --- PASS: TestCanSave/РежимТолькоЧтение (0.00s)
    --- PASS: TestCanSave/НетБазыДанных (0.00s)
    --- PASS: TestCanSave/НеподходящееСостояние (0.00s)
=== RUN   TestUpdateRootModTime
=== RUN   TestUpdateRootModTime/УспешноеОбновление
=== RUN   TestUpdateRootModTime/ПустаяБазаДанных
2025/04/27 20:25:41 WARN Не удалось обновить LastModificationTime: db, Content или Root is nil
=== RUN   TestUpdateRootModTime/НетКорневойГруппы
2025/04/27 20:25:41 WARN Не удалось обновить LastModificationTime: нет корневой группы
--- PASS: TestUpdateRootModTime (0.00s)
    --- PASS: TestUpdateRootModTime/УспешноеОбновление (0.00s)
    --- PASS: TestUpdateRootModTime/ПустаяБазаДанных (0.00s)
    --- PASS: TestUpdateRootModTime/НетКорневойГруппы (0.00s)
=== RUN   TestHandleGlobalKeys
=== RUN   TestHandleGlobalKeys/CtrlC
=== RUN   TestHandleGlobalKeys/CtrlS_РазрешеноСохранение
2025/04/27 20:25:41 INFO Начало обновления m.db перед сохранением
2025/04/27 20:25:41 INFO Обновление m.db завершено updated_count=0
2025/04/27 20:25:41 WARN Не удалось обновить LastModificationTime: db, Content или Root is nil
2025/04/27 20:25:41 INFO Запуск сохранения KDBX path=/tmp/test.kdbx
=== RUN   TestHandleGlobalKeys/CtrlS_ЗапрещеноСохранение
=== RUN   TestHandleGlobalKeys/ДругаяКлавиша
--- PASS: TestHandleGlobalKeys (0.00s)
    --- PASS: TestHandleGlobalKeys/CtrlC (0.00s)
    --- PASS: TestHandleGlobalKeys/CtrlS_РазрешеноСохранение (0.00s)
    --- PASS: TestHandleGlobalKeys/CtrlS_ЗапрещеноСохранение (0.00s)
    --- PASS: TestHandleGlobalKeys/ДругаяКлавиша (0.00s)
=== RUN   TestUpdateDBFromList
=== RUN   TestUpdateDBFromList/ОбновлениеСуществующейЗаписи
2025/04/27 20:25:41 INFO Начало обновления m.db перед сохранением
2025/04/27 20:25:41 INFO Обновление m.db завершено updated_count=1
=== RUN   TestUpdateDBFromList/ЗаписьНеНайденаВБазе
2025/04/27 20:25:41 INFO Начало обновления m.db перед сохранением
2025/04/27 20:25:41 WARN Запись из списка не найдена в m.db uuid="YfW2GnMDsvDu/aq/oWLxJw=="
2025/04/27 20:25:41 INFO Обновление m.db завершено updated_count=0
=== RUN   TestUpdateDBFromList/ПустойСписок
2025/04/27 20:25:41 INFO Начало обновления m.db перед сохранением
2025/04/27 20:25:41 INFO Обновление m.db завершено updated_count=0
--- PASS: TestUpdateDBFromList (0.00s)
    --- PASS: TestUpdateDBFromList/ОбновлениеСуществующейЗаписи (0.00s)
    --- PASS: TestUpdateDBFromList/ЗаписьНеНайденаВБазе (0.00s)
    --- PASS: TestUpdateDBFromList/ПустойСписок (0.00s)
=== RUN   TestHandleErrorMsg
--- PASS: TestHandleErrorMsg (0.00s)
=== RUN   TestDeepCopyEntry
--- PASS: TestDeepCopyEntry (0.00s)
=== RUN   TestDeepCopyEntryAlias
--- PASS: TestDeepCopyEntryAlias (0.00s)
=== RUN   TestFindEntryInDB
=== RUN   TestFindEntryInDB/Entry_In_Root_Group
=== RUN   TestFindEntryInDB/Entry_In_Subgroup
=== RUN   TestFindEntryInDB/Nonexistent_Entry
=== RUN   TestFindEntryInDB/Nil_Database
=== RUN   TestFindEntryInDB/Nil_Content
=== RUN   TestFindEntryInDB/Nil_Root
--- PASS: TestFindEntryInDB (0.00s)
    --- PASS: TestFindEntryInDB/Entry_In_Root_Group (0.00s)
    --- PASS: TestFindEntryInDB/Entry_In_Subgroup (0.00s)
    --- PASS: TestFindEntryInDB/Nonexistent_Entry (0.00s)
    --- PASS: TestFindEntryInDB/Nil_Database (0.00s)
    --- PASS: TestFindEntryInDB/Nil_Content (0.00s)
    --- PASS: TestFindEntryInDB/Nil_Root (0.00s)
=== RUN   TestFindEntryInGroups
=== RUN   TestFindEntryInGroups/Entry_In_Root_Group
=== RUN   TestFindEntryInGroups/Entry_In_Subgroup
=== RUN   TestFindEntryInGroups/Nonexistent_Entry
=== RUN   TestFindEntryInGroups/Empty_Groups
--- PASS: TestFindEntryInGroups (0.00s)
    --- PASS: TestFindEntryInGroups/Entry_In_Root_Group (0.00s)
    --- PASS: TestFindEntryInGroups/Entry_In_Subgroup (0.00s)
    --- PASS: TestFindEntryInGroups/Nonexistent_Entry (0.00s)
    --- PASS: TestFindEntryInGroups/Empty_Groups (0.00s)
=== RUN   TestFindEntryInDBAlias
--- PASS: TestFindEntryInDBAlias (0.00s)
PASS
ok  	github.com/maynagashev/gophkeeper/client/internal/tui	12.721s
